const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Dashboard-9e9iGL93.js","assets/markdown-vhK0I3xZ.js","assets/react-vendor-CqdHEJLj.js","assets/tag-OJTjhC6z.js","assets/message-square-hLfvMlGv.js","assets/refresh-cw-CYmBFy4o.js","assets/plus-BdRbatl3.js","assets/file-text-Di97vihS.js","assets/syntax-D9IAFz2e.js","assets/Podcasts-CSDTxN_i.js","assets/external-link-BWvfrgbb.js","assets/Episodes-CftMn4RC.js","assets/arrow-left-CUoR9MhH.js","assets/play-MUyRjRxf.js","assets/Viewer-DISP24hn.js","assets/Videos-Cocmwm2N.js","assets/YouTubeCookieGuide-EIBfkzl7.js","assets/upload-BqH57JWi.js","assets/PlatformIcon-BqcV5Htc.js","assets/VideoViewer-BNMHsqY8.js","assets/Settings-hpMAcb17.js","assets/Login-69AnUHCg.js"])))=>i.map(i=>d[i]);
import{j as o}from"./markdown-vhK0I3xZ.js";import{a as ke,r as m,u as Se,L as W,g as Ee,R as ie,b as _e,d as v,N as ce,B as Ne}from"./react-vendor-CqdHEJLj.js";import{_ as E}from"./syntax-D9IAFz2e.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const a of n)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function s(n){const a={};return n.integrity&&(a.integrity=n.integrity),n.referrerPolicy&&(a.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?a.credentials="include":n.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(n){if(n.ep)return;n.ep=!0;const a=s(n);fetch(n.href,a)}})();var B={},Y=ke;B.createRoot=Y.createRoot,B.hydrateRoot=Y.hydrateRoot;const O="/api/auth",I="xyz_access_token",P="xyz_refresh_token",F="xyz_user",M="xyz_remember_me";function Te(){return localStorage.getItem(M)==="true"?localStorage:sessionStorage}function zs(e){e?localStorage.setItem(M,"true"):localStorage.removeItem(M)}function Vs(){return localStorage.getItem(M)==="true"}async function $e(){const e=await fetch(`${O}/config`);return e.ok?e.json():{supabase_enabled:!1,supabase_url:null}}async function Ce(e,t){const s=await fetch(`${O}/signup`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})});if(!s.ok){const n=await s.json();throw new Error(n.detail||"Failed to sign up")}const r=await s.json();return r.access_token&&H(r),r}async function Oe(e,t){const s=await fetch(`${O}/signin`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})});if(!s.ok){const n=await s.json();throw new Error(n.detail||"Invalid email or password")}const r=await s.json();return H(r),r}async function Ie(){const e=R();try{await fetch(`${O}/signout`,{method:"POST",headers:{Authorization:`Bearer ${e}`}})}catch{}le()}async function Z(){const e=R();if(!e)return null;const t=await fetch(`${O}/me`,{headers:{Authorization:`Bearer ${e}`}});if(!t.ok)return null;const s=await t.json();return s.authenticated?s:null}async function Pe(){const e=Fe();if(!e)return null;const t=await fetch(`${O}/refresh`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refresh_token:e})});if(!t.ok)return le(),null;const s=await t.json();return H(s),s}function R(){return localStorage.getItem(I)||sessionStorage.getItem(I)}function Fe(){return localStorage.getItem(P)||sessionStorage.getItem(P)}function Re(){const e=localStorage.getItem(F)||sessionStorage.getItem(F);if(!e)return null;try{return JSON.parse(e)}catch{return null}}function H(e){const t=Te();t.setItem(I,e.access_token),t.setItem(P,e.refresh_token),t.setItem(F,JSON.stringify({id:e.user_id,email:e.email,authenticated:!0}))}function le(){localStorage.removeItem(I),localStorage.removeItem(P),localStorage.removeItem(F),sessionStorage.removeItem(I),sessionStorage.removeItem(P),sessionStorage.removeItem(F)}function Ae(){return!!R()}const de=m.createContext(null);function ze({children:e}){const[t,s]=m.useState(null),[r,n]=m.useState(!0),[a,i]=m.useState(!1);m.useEffect(()=>{async function u(){try{const x=await $e();if(i(x.supabase_enabled),!x.supabase_enabled){s({id:"local",email:"local@localhost",authenticated:!0}),n(!1);return}if(Ae()){const g=await Z();s(g||null)}else if(Re()){const b=await Z();s(b)}}catch(x){console.error("Auth check failed:",x),s(null)}finally{n(!1)}}u()},[]);const h=async(u,x)=>{const g=await Oe(u,x);s({id:g.user_id,email:g.email,authenticated:!0})},p=async(u,x)=>{const g=await Ce(u,x);g.access_token&&s({id:g.user_id,email:g.email,authenticated:!0})},y=async()=>{await Ie(),s(null)};return o.jsx(de.Provider,{value:{user:t,loading:r,authEnabled:a,signIn:h,signUp:p,signOut:y},children:e})}function Q(){const e=m.useContext(de);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e}/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ve={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Me=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),w=(e,t)=>{const s=m.forwardRef(({color:r="currentColor",size:n=24,strokeWidth:a=2,absoluteStrokeWidth:i,className:h="",children:p,...y},u)=>m.createElement("svg",{ref:u,...Ve,width:n,height:n,stroke:r,strokeWidth:i?Number(a)*24/Number(n):a,className:["lucide",`lucide-${Me(e)}`,h].join(" "),...y},[...t.map(([x,g])=>m.createElement(x,g)),...Array.isArray(p)?p:[p]]));return s.displayName=`${e}`,s};/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Je=w("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Le=w("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const De=w("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ue=w("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const We=w("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ue=w("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Be=w("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ke=w("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qe=w("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $=w("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ee=w("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const He=w("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=w("Radio",[["path",{d:"M4.9 19.1C1 15.2 1 8.8 4.9 4.9",key:"1vaf9d"}],["path",{d:"M7.8 16.2c-2.3-2.3-2.3-6.1 0-8.5",key:"u1ii0m"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M16.2 7.8c2.3 2.3 2.3 6.1 0 8.5",key:"1j5fej"}],["path",{d:"M19.1 4.9C23 8.8 23 15.1 19.1 19",key:"10b0cb"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qe=w("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xe=w("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ge=w("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ye=w("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const he=w("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ze=w("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=w("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),te=[{path:"/",icon:qe,label:"Dashboard"},{path:"/podcasts",icon:X,label:"Podcasts"},{path:"/videos",icon:he,label:"Videos"},{path:"/settings",icon:Xe,label:"Settings"}];function et(){const e=Se(),{user:t,authEnabled:s,signOut:r}=Q(),[n,a]=m.useState(!1),i=async()=>{await r()};return o.jsxs("header",{className:"sticky top-0 z-40 bg-dark-surface border-b border-dark-border",children:[o.jsxs("div",{className:"flex items-center justify-between h-12 px-4",children:[o.jsxs(W,{to:"/",className:"flex items-center gap-2 flex-shrink-0",children:[o.jsx(X,{className:"w-5 h-5 text-indigo-500"}),o.jsx("span",{className:"font-semibold text-sm text-white hidden sm:inline",children:"Podcast & Video Tool"})]}),o.jsx("nav",{className:"hidden md:flex items-center gap-1",children:te.map(h=>{const p=h.path==="/"?e.pathname==="/":e.pathname.startsWith(h.path),y=h.icon;return o.jsxs(W,{to:h.path,className:`flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-sm transition-colors ${p?"bg-indigo-600 text-white":"text-gray-400 hover:bg-dark-hover hover:text-white"}`,children:[o.jsx(y,{size:16}),o.jsx("span",{children:h.label})]},h.path)})}),o.jsxs("div",{className:"flex items-center gap-2",children:[s&&t&&o.jsxs("div",{className:"hidden sm:flex items-center gap-2",children:[o.jsxs("div",{className:"flex items-center gap-1.5 text-xs text-gray-400",children:[o.jsx(Ye,{size:14}),o.jsx("span",{className:"max-w-[120px] truncate",children:t.email})]}),o.jsx("button",{onClick:i,className:"p-1.5 text-gray-400 hover:text-white hover:bg-dark-hover rounded-lg transition-colors",title:"Sign Out",children:o.jsx(ee,{size:14})})]}),o.jsx("button",{onClick:()=>a(!n),className:"p-1.5 rounded-lg hover:bg-dark-hover transition-colors md:hidden",children:n?o.jsx(J,{size:20}):o.jsx(He,{size:20})})]})]}),n&&o.jsxs("div",{className:"md:hidden border-t border-dark-border bg-dark-surface p-2 space-y-1",children:[te.map(h=>{const p=h.path==="/"?e.pathname==="/":e.pathname.startsWith(h.path),y=h.icon;return o.jsxs(W,{to:h.path,onClick:()=>a(!1),className:`flex items-center gap-2 px-3 py-2 rounded-lg text-sm transition-colors ${p?"bg-indigo-600 text-white":"text-gray-400 hover:bg-dark-hover hover:text-white"}`,children:[o.jsx(y,{size:16}),o.jsx("span",{children:h.label})]},h.path)}),s&&t&&o.jsxs("button",{onClick:i,className:"w-full flex items-center gap-2 px-3 py-2 rounded-lg text-sm text-gray-400 hover:bg-dark-hover hover:text-white transition-colors",children:[o.jsx(ee,{size:16}),o.jsx("span",{children:"Sign Out"})]})]})]})}const tt={},se=e=>{let t;const s=new Set,r=(u,x)=>{const g=typeof u=="function"?u(t):u;if(!Object.is(g,t)){const b=t;t=x??(typeof g!="object"||g===null)?g:Object.assign({},t,g),s.forEach(d=>d(t,b))}},n=()=>t,p={setState:r,getState:n,getInitialState:()=>y,subscribe:u=>(s.add(u),()=>s.delete(u)),destroy:()=>{(tt?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),s.clear()}},y=t=e(r,n,p);return p},st=e=>e?se(e):se;var me={exports:{}},fe={},pe={exports:{}},ge={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var C=m;function ot(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var nt=typeof Object.is=="function"?Object.is:ot,rt=C.useState,at=C.useEffect,it=C.useLayoutEffect,ct=C.useDebugValue;function lt(e,t){var s=t(),r=rt({inst:{value:s,getSnapshot:t}}),n=r[0].inst,a=r[1];return it(function(){n.value=s,n.getSnapshot=t,U(n)&&a({inst:n})},[e,s,t]),at(function(){return U(n)&&a({inst:n}),e(function(){U(n)&&a({inst:n})})},[e]),ct(s),s}function U(e){var t=e.getSnapshot;e=e.value;try{var s=t();return!nt(e,s)}catch{return!0}}function dt(e,t){return t()}var ut=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?dt:lt;ge.useSyncExternalStore=C.useSyncExternalStore!==void 0?C.useSyncExternalStore:ut;pe.exports=ge;var ht=pe.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var L=m,mt=ht;function ft(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var pt=typeof Object.is=="function"?Object.is:ft,gt=mt.useSyncExternalStore,yt=L.useRef,xt=L.useEffect,wt=L.useMemo,bt=L.useDebugValue;fe.useSyncExternalStoreWithSelector=function(e,t,s,r,n){var a=yt(null);if(a.current===null){var i={hasValue:!1,value:null};a.current=i}else i=a.current;a=wt(function(){function p(b){if(!y){if(y=!0,u=b,b=r(b),n!==void 0&&i.hasValue){var d=i.value;if(n(d,b))return x=d}return x=b}if(d=x,pt(u,b))return d;var G=r(b);return n!==void 0&&n(d,G)?(u=b,d):(u=b,x=G)}var y=!1,u,x,g=s===void 0?null:s;return[function(){return p(t())},g===null?void 0:function(){return p(g())}]},[t,s,r,n]);var h=gt(e,a[0],a[1]);return xt(function(){i.hasValue=!0,i.value=h},[h]),bt(h),h};me.exports=fe;var jt=me.exports;const vt=Ee(jt),ye={},{useDebugValue:kt}=ie,{useSyncExternalStoreWithSelector:St}=vt;let oe=!1;const Et=e=>e;function _t(e,t=Et,s){(ye?"production":void 0)!=="production"&&s&&!oe&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),oe=!0);const r=St(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,s);return kt(r),r}const ne=e=>{(ye?"production":void 0)!=="production"&&typeof e!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const t=typeof e=="function"?st(e):e,s=(r,n)=>_t(t,r,n);return Object.assign(s,t),s},Nt=e=>e?ne(e):ne,j=Nt(e=>({jobs:[],setJobs:t=>e({jobs:t}),mergeJobs:t=>e(s=>{const r=new Map(t.map(i=>[i.job_id,i])),n=s.jobs.filter(i=>r.has(i.job_id)?!1:!["completed","failed","cancelled"].includes(i.status));return{jobs:[...t,...n]}}),updateJob:t=>e(s=>{const r=s.jobs.findIndex(n=>n.job_id===t.job_id);if(r>=0){const n=[...s.jobs],a=n[r];return n[r]={...a,...t,episode_title:t.episode_title||a.episode_title,episode_id:t.episode_id||a.episode_id},{jobs:n}}else return{jobs:[t,...s.jobs]}}),removeJob:t=>e(s=>({jobs:s.jobs.filter(r=>r.job_id!==t)})),clearCompletedJobs:()=>e(t=>({jobs:t.jobs.filter(s=>!["completed","failed","cancelled"].includes(s.status))})),videoTasks:[],setVideoTasks:t=>e({videoTasks:t}),updateVideoTask:t=>e(s=>{const r=s.videoTasks.findIndex(n=>n.id===t.id);if(r>=0){const n=[...s.videoTasks];return n[r]={...n[r],...t},{videoTasks:n}}return{videoTasks:[t,...s.videoTasks]}}),removeVideoTask:t=>e(s=>({videoTasks:s.videoTasks.filter(r=>r.id!==t)})),selectedVideoTaskId:null,setSelectedVideoTaskId:t=>e({selectedVideoTaskId:t}),wsConnected:!1,setWsConnected:t=>e({wsConnected:t})})),l="/api";function re(e,t){const s={},r=e??R();return r&&(s.Authorization=`Bearer ${r}`),s}async function c(e,t={}){const s={...re(),...t.headers},r=await fetch(e,{...t,headers:s});if(r.status===401){const n=await Pe();if(n){const a={...re(n.access_token),...t.headers};return fetch(e,{...t,headers:a})}}return r}async function Tt(){const e=await c(`${l}/stats`);if(!e.ok)throw new Error("Failed to fetch stats");return e.json()}async function $t(){const e=await c(`${l}/podcasts`);if(!e.ok)throw new Error("Failed to fetch podcasts");return e.json()}async function Ct(e){const t=await c(`${l}/podcasts`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:e})});if(!t.ok){const s=await t.json();throw new Error(s.detail||"Failed to add podcast")}return t.json()}async function Ot(e){if(!(await c(`${l}/podcasts/${e}`,{method:"DELETE"})).ok)throw new Error("Failed to remove podcast")}async function It(e){const t=await c(`${l}/podcasts/${e}`);if(!t.ok)throw new Error("Failed to fetch podcast");return t.json()}async function Pt(e){const t=await c(`${l}/podcasts/${e}/episodes`);if(!t.ok)throw new Error("Failed to fetch episodes");return t.json()}async function Ft(){const e=await c(`${l}/summaries`);if(!e.ok)throw new Error("Failed to fetch summaries");return e.json()}async function Rt(e){const t=await c(`${l}/summaries/${e}`);if(!t.ok)throw new Error("Failed to fetch summary");return t.json()}async function At(e){const t=await c(`${l}/transcripts/${e}`);if(!t.ok)throw new Error("Failed to fetch transcript");return t.json()}async function zt(e,t={}){const s=D(),r=await c(`${l}/process`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({episode_url:e,transcribe_only:t.transcribeOnly||!1,force:t.force||!1,whisper_model:s.whisper_model,llm_model:s.llm_model})});if(!r.ok)throw new Error("Failed to start processing");return r.json()}async function Vt(e){const t=await c(`${l}/podcasts/${e}/refresh`,{method:"POST"});if(!t.ok)throw new Error("Failed to refresh podcast");return t.json()}async function Mt(){const e=await c(`${l}/settings`);if(!e.ok)throw new Error("Failed to fetch settings");return e.json()}async function Jt(e){const t=await c(`${l}/settings`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error("Failed to update settings");return t.json()}function D(){return{whisper_model:localStorage.getItem("whisper_model")||"whisper-large-v3-turbo",llm_model:localStorage.getItem("llm_model")||""}}async function xe(e){const t=await c(`${l}/jobs/${e}/cancel`,{method:"POST"});if(!t.ok)throw new Error("Failed to cancel job");return t.json()}async function K(e){const t=await c(`${l}/jobs/${e}`,{method:"DELETE"});if(!t.ok)throw new Error("Failed to delete job");return t.json()}async function we(e){const t=await c(`${l}/jobs/${e}/retry`,{method:"POST"});if(!t.ok)throw new Error("Failed to retry job");return t.json()}async function Lt(e){const t=D(),s=await c(`${l}/episodes/${e}/resummarize`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({llm_model:t.llm_model})});if(!s.ok)throw new Error("Failed to start re-summarization");return s.json()}async function Dt(e){const t=await c(`${l}/episodes/${e}`,{method:"DELETE"});if(!t.ok)throw new Error("Failed to delete episode");return t.json()}async function Wt(){const e=await c(`${l}/new-episodes`);if(!e.ok)throw new Error("Failed to fetch new episodes");return e.json()}async function Ut(){const e=await c(`${l}/check-podcasts`,{method:"POST"});if(!e.ok)throw new Error("Failed to check for updates");return e.json()}async function Bt(e){const t=await c(`${l}/podcasts/import-subscriptions`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e})});if(!t.ok){const s=await t.json();throw new Error(s.detail||"Failed to import subscriptions")}return t.json()}async function Kt(e){const t=D(),s=await c(`${l}/video-notes/generate-json`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...e,llm_model:e.llm_model||t.llm_model})});if(!s.ok){let r=`Server error ${s.status}`;try{const n=await s.json();r=n.detail||n.message||r}catch{}throw new Error(r)}return s.json()}async function qt(){const e=await c(`${l}/video-notes/tasks`);if(!e.ok)throw new Error("Failed to fetch video tasks");return e.json()}async function Ht(e){const t=await c(`${l}/video-notes/tasks/${e}`);if(!t.ok)throw new Error("Failed to fetch video task");return t.json()}async function Qt(e){const t=await c(`${l}/video-notes/tasks/${e}`,{method:"DELETE"});if(!t.ok)throw new Error("Failed to delete video task");return t.json()}async function Xt(e){const t=await c(`${l}/video-notes/tasks/${e}/retry`,{method:"POST"});if(!t.ok)throw new Error("Failed to retry video task");return t.json()}async function Gt(e){const t=await c(`${l}/video-notes/tasks/${e}/cancel`,{method:"POST"});if(!t.ok)throw new Error("Failed to cancel video task");return t.json()}async function Yt(e){const t=new FormData;t.append("file",e);const s=await c(`${l}/video-notes/upload`,{method:"POST",body:t});if(!s.ok)throw new Error("Failed to upload video");return s.json()}async function Zt(){const e=await c(`${l}/video-notes/sys-health`);if(!e.ok)throw new Error("Failed to fetch system health");return e.json()}async function es(e){const t=await c(`${l}/cookies/${e}`);if(!t.ok)throw new Error("Failed to fetch cookie status");return t.json()}async function ts(){const e=await c(`${l}/cookies/bilibili/validate`);return e.ok?e.json():{valid:!1,reason:"error",message:"Server error"}}async function ss(){const e=await c(`${l}/cookies`);if(!e.ok)throw new Error("Failed to fetch cookies");return e.json()}async function os(){const e=await c(`${l}/cookies/bilibili/qr/generate`);if(!e.ok)throw new Error("Failed to generate QR code");return e.json()}async function ns(e){const t=await c(`${l}/cookies/bilibili/qr/poll?qrcode_key=${encodeURIComponent(e)}`);if(!t.ok)throw new Error("Failed to poll QR status");return t.json()}async function rs(){const e=await c(`${l}/cookies/douyin/qr/generate`);if(!e.ok)throw new Error("Failed to generate Douyin QR code");return e.json()}async function as(e){const t=await c(`${l}/cookies/douyin/qr/poll?token=${encodeURIComponent(e)}`);if(!t.ok)throw new Error("Failed to poll Douyin QR status");return t.json()}async function is(e,t){const s=await c(`${l}/cookies/save-simple`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({platform:e,cookie_string:t})});if(!s.ok){const r=await s.json().catch(()=>({detail:"Failed to save cookie"}));throw new Error(r.detail||"Failed to save cookie")}return s.json()}async function cs(e,t){const s=new FormData;s.append("platform",e),s.append("file",t);const r=await c(`${l}/cookies/upload-file`,{method:"POST",body:s});if(!r.ok){const n=await r.json().catch(()=>({detail:"Upload failed"}));throw new Error(n.detail||"Failed to upload cookie file")}return r.json()}async function ls(e,t="chrome"){const s=await c(`${l}/cookies/import-browser`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({platform:e,browser:t})});if(!s.ok){const r=await s.json().catch(()=>({detail:"Import failed"}));throw new Error(r.detail||"Failed to import browser cookies")}return s.json()}function be(){return localStorage.getItem("notion_api_key")||""}async function ds(e){const t=e?`?query=${encodeURIComponent(e)}`:"",s=await c(`${l}/notion/pages${t}`,{headers:{"X-Notion-Key":be()}});if(!s.ok){const r=await s.json().catch(()=>({detail:"Failed to fetch Notion pages"}));throw new Error(r.detail||"Failed to fetch Notion pages")}return s.json()}async function us(e,t){const s=await c(`${l}/notion/export`,{method:"POST",headers:{"Content-Type":"application/json","X-Notion-Key":be()},body:JSON.stringify({task_id:e,parent_page_id:t})});if(!s.ok){const r=await s.json().catch(()=>({detail:"Export to Notion failed"}));throw new Error(r.detail||"Export to Notion failed")}return s.json()}const Ms=Object.freeze(Object.defineProperty({__proto__:null,addPodcast:Ct,authFetch:c,bilibiliQrGenerate:os,bilibiliQrPoll:ns,cancelJob:xe,cancelVideoTask:Gt,checkPodcastsForUpdates:Ut,deleteEpisode:Dt,deleteJob:K,deleteVideoTask:Qt,douyinQrGenerate:rs,douyinQrPoll:as,exportToNotion:us,fetchAllCookies:ss,fetchCookieStatus:es,fetchEpisodes:Pt,fetchNewEpisodes:Wt,fetchNotionPages:ds,fetchPodcast:It,fetchPodcasts:$t,fetchSettings:Mt,fetchStats:Tt,fetchSummaries:Ft,fetchSummary:Rt,fetchSysHealth:Zt,fetchTranscript:At,fetchVideoTask:Ht,fetchVideoTasks:qt,generateVideoNote:Kt,getUserModelSettings:D,importBrowserCookies:ls,importUserSubscriptions:Bt,processEpisode:zt,refreshPodcast:Vt,removePodcast:Ot,resummarizeEpisode:Lt,retryJob:we,retryVideoTask:Xt,saveSimpleCookie:is,updateSettings:Jt,uploadCookieFile:cs,uploadVideoFile:Yt,validateBilibiliCookie:ts},Symbol.toStringTag,{value:"Module"}));function Js(e,t="sm"){const s=t==="sm"?"w-4 h-4":"w-5 h-5";switch(e){case"completed":return o.jsx(ue,{className:`${s} text-green-400`});case"failed":return o.jsx(Ze,{className:`${s} text-red-400`});case"cancelled":return o.jsx(De,{className:`${s} text-gray-400`});case"cancelling":return o.jsx($,{className:`${s} text-yellow-400 animate-spin`});case"pending":return o.jsx(Be,{className:`${s} text-gray-500`});default:return o.jsx($,{className:`${s} text-indigo-400 animate-spin`})}}function hs(e){switch(e){case"completed":return"bg-green-500";case"failed":return"bg-red-500";case"cancelled":return"bg-gray-500";case"cancelling":return"bg-yellow-500";case"downloading":return"bg-blue-500";case"transcribing":return"bg-purple-500";case"summarizing":return"bg-indigo-500";case"fetching":return"bg-cyan-500";case"pending":return"bg-gray-500";default:return"bg-indigo-500"}}function ms(e){switch(e){case"pending":return"Waiting...";case"fetching":return"Fetching info...";case"downloading":return"Downloading...";case"transcribing":return"Transcribing...";case"summarizing":return"Summarizing...";case"completed":return"Done!";case"failed":return"Failed";case"cancelled":return"Cancelled";case"cancelling":return"Cancelling...";default:return"Processing..."}}function fs(e){return!["completed","failed","cancelled"].includes(e)}const A=640;function ps(){const{jobs:e,videoTasks:t,wsConnected:s,removeJob:r}=j(),[n,a]=m.useState(()=>typeof window<"u"?window.innerWidth>=A:!0),i=m.useRef(0),h=e.filter(d=>d.status!=="completed"&&d.status!=="failed"&&d.status!=="cancelled"),p=e.filter(d=>d.status==="completed"||d.status==="failed"||d.status==="cancelled"),y=t.filter(d=>!["success","failed","cancelled"].includes(d.status)),u=h.length+y.length,x=e.length+y.length;m.useEffect(()=>{u>i.current&&window.innerWidth<A&&a(!0),i.current=u},[u]),m.useEffect(()=>{if(u===0&&window.innerWidth<A){const d=setTimeout(()=>a(!1),2e3);return()=>clearTimeout(d)}},[u]),m.useEffect(()=>{const d=()=>{window.innerWidth<A&&u===0&&a(!1)};return window.addEventListener("resize",d),()=>window.removeEventListener("resize",d)},[u]);const g=async d=>{try{await K(d)}catch{}r(d)},b=async()=>{for(const d of p){try{await K(d.job_id)}catch{}r(d.job_id)}};return x===0?null:o.jsxs("div",{className:"fixed bottom-4 left-4 right-4 sm:right-auto z-40 sm:w-96 bg-dark-surface border border-dark-border rounded-xl shadow-xl overflow-hidden",children:[o.jsxs("div",{className:"flex items-center justify-between p-2 sm:p-3 bg-dark-hover",children:[o.jsxs("button",{onClick:()=>a(!n),className:"flex items-center gap-2 flex-1 min-h-[44px] sm:min-h-0",children:[o.jsx(Je,{className:"w-5 h-5 sm:w-4 sm:h-4 text-indigo-400"}),o.jsxs("span",{className:"font-medium text-sm",children:["Processing",u>0?` (${u} active)`:""]})]}),o.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[!s&&o.jsx("span",{className:"text-xs text-yellow-500",children:"Offline"}),p.length>0&&o.jsx("button",{onClick:b,className:"p-2 sm:p-1 min-w-[44px] min-h-[44px] sm:min-w-0 sm:min-h-0 flex items-center justify-center text-gray-500 hover:text-white hover:bg-dark-border rounded transition-colors",title:"Clear completed",children:o.jsx(Ge,{size:16,className:"sm:w-3.5 sm:h-3.5"})}),o.jsx("button",{onClick:()=>a(!n),className:"p-2 sm:p-1 min-w-[44px] min-h-[44px] sm:min-w-0 sm:min-h-0 flex items-center justify-center",children:n?o.jsx(We,{size:20,className:"sm:w-4 sm:h-4"}):o.jsx(Ue,{size:20,className:"sm:w-4 sm:h-4"})})]})]}),n&&o.jsxs("div",{className:"max-h-48 sm:max-h-72 overflow-y-auto divide-y divide-dark-border",children:[y.map(d=>o.jsx(gs,{task:d},`v-${d.id}`)),h.map(d=>o.jsx(ae,{job:d,showCancel:!0},d.job_id)),p.slice(0,3).map(d=>o.jsx(ae,{job:d,onDismiss:()=>g(d.job_id)},d.job_id))]})]})}function gs({task:e}){const t=e.status==="downloading"?"bg-blue-500":e.status==="transcribing"?"bg-purple-500":e.status==="summarizing"?"bg-indigo-500":"bg-gray-500";return o.jsxs("div",{className:"p-3 space-y-2",children:[o.jsxs("div",{className:"flex items-start gap-2",children:[o.jsx(he,{size:16,className:"text-cyan-400 mt-0.5 flex-shrink-0"}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("p",{className:"text-sm font-medium text-white truncate",children:e.title||"Processing video..."}),o.jsx("p",{className:"text-xs text-gray-500",children:e.message||e.status})]})]}),o.jsxs("div",{className:"relative h-1.5 bg-dark-border rounded-full overflow-hidden",children:[o.jsx("div",{className:`absolute left-0 top-0 h-full ${t} transition-all duration-300`,style:{width:`${Math.min(e.progress,100)}%`}}),e.progress===0&&o.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent animate-shimmer"})]}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("p",{className:"text-xs text-cyan-400",children:e.message||"Processing..."}),o.jsxs("p",{className:"text-xs font-medium text-white",children:[Math.round(e.progress),"%"]})]})]})}function ae({job:e,showCancel:t=!1,onDismiss:s}){const[r,n]=m.useState(!1),[a,i]=m.useState(!1),{removeJob:h}=j(),p=async()=>{n(!0);try{await xe(e.job_id)}catch(g){console.error("Cancel failed:",g)}finally{n(!1)}},y=async()=>{i(!0);try{await we(e.job_id)}catch(g){console.error("Retry failed:",g),h(e.job_id)}finally{i(!1)}},u=fs(e.status),x=e.status==="failed"||e.status==="cancelled";return o.jsxs("div",{className:"p-3 space-y-2",children:[o.jsxs("div",{className:"flex items-start gap-2",children:[o.jsx(X,{size:16,className:"text-indigo-400 mt-0.5 flex-shrink-0"}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("p",{className:"text-sm font-medium text-white truncate",children:e.episode_title||"Processing episode..."}),o.jsx("p",{className:"text-xs text-gray-500",children:e.message||ms(e.status)})]}),t&&u&&e.status!=="cancelling"&&o.jsx("button",{onClick:p,disabled:r,className:"p-2 sm:p-1 min-w-[40px] min-h-[40px] sm:min-w-0 sm:min-h-0 flex items-center justify-center text-gray-500 hover:text-red-400 hover:bg-red-400/10 rounded transition-colors -mr-1",title:"Cancel",children:o.jsx(J,{className:"w-5 h-5 sm:w-4 sm:h-4"})}),x&&e.episode_id&&o.jsx("button",{onClick:y,disabled:a,className:"p-2 sm:p-1 min-w-[40px] min-h-[40px] sm:min-w-0 sm:min-h-0 flex items-center justify-center text-gray-500 hover:text-green-400 hover:bg-green-400/10 rounded transition-colors",title:"Retry",children:o.jsx(Qe,{className:`w-5 h-5 sm:w-4 sm:h-4 ${a?"animate-spin":""}`})}),s&&!u&&o.jsx("button",{onClick:s,className:"p-2 sm:p-1 min-w-[40px] min-h-[40px] sm:min-w-0 sm:min-h-0 flex items-center justify-center text-gray-500 hover:text-white hover:bg-dark-border rounded transition-colors -mr-1",title:"Dismiss",children:o.jsx(J,{className:"w-5 h-5 sm:w-4 sm:h-4"})})]}),u&&o.jsxs("div",{className:"relative h-1.5 bg-dark-border rounded-full overflow-hidden",children:[o.jsx("div",{className:`absolute left-0 top-0 h-full ${hs(e.status)} transition-all duration-300`,style:{width:`${Math.min(e.progress,100)}%`}}),e.progress===0&&o.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent animate-shimmer"})]}),u&&o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("p",{className:"text-xs text-indigo-400",children:e.message||"Processing..."}),o.jsxs("p",{className:"text-xs font-medium text-white",children:[Math.round(e.progress),"%"]})]})]})}let f=null,z=null,S=null,k=!1,V=0,T=null;async function q(){if(!(k&&(f==null?void 0:f.readyState)===WebSocket.OPEN))try{const e=await c("/api/jobs");if(e.ok){const s=(await e.json()).jobs||[];s.forEach(a=>{j.getState().updateJob(a)});const n=s.some(a=>!["completed","failed","cancelled"].includes(a.status))?3e3:15e3;S&&(clearInterval(S),S=window.setInterval(q,n))}}catch(e){console.debug("Poll failed:",e)}}function ys(){S||(q(),S=window.setInterval(q,5e3))}function xs(){S&&(clearInterval(S),S=null)}function je(){if((f==null?void 0:f.readyState)===WebSocket.OPEN)return;ys();const t=`${window.location.protocol==="https:"?"wss:":"ws:"}//${window.location.host}/api/ws/progress`;f=new WebSocket(t),f.onopen=()=>{console.log("WebSocket connected"),j.getState().setWsConnected(!0);const s=R();s&&(f==null?void 0:f.readyState)===WebSocket.OPEN?f.send(JSON.stringify({type:"auth",token:s})):(f==null?void 0:f.readyState)===WebSocket.OPEN&&f.send(JSON.stringify({type:"auth"}))},f.onclose=()=>{console.log("WebSocket disconnected"),j.getState().setWsConnected(!1),k=!1,z=window.setTimeout(()=>{je()},3e3)},f.onerror=s=>{console.error("WebSocket error:",s),k=!1},f.onmessage=s=>{var r,n,a;try{const i=JSON.parse(s.data);switch(V=Date.now(),k||(k=!0,console.log("WebSocket receiving updates, polling paused")),i.type){case"init":console.log("WebSocket init:",((r=i.jobs)==null?void 0:r.length)||0,"jobs"),j.getState().mergeJobs(i.jobs||[]);break;case"job_update":i.job&&(console.log("WebSocket job_update:",i.job.job_id,((n=i.job.progress)==null?void 0:n.toFixed(1))+"%"),j.getState().updateJob(i.job));break;case"video_job_update":i.task&&(console.log("WebSocket video_job_update:",i.task.id,((a=i.task.progress)==null?void 0:a.toFixed(1))+"%"),j.getState().updateVideoTask(i.task));break;case"heartbeat":(f==null?void 0:f.readyState)===WebSocket.OPEN&&f.send(JSON.stringify({type:"ping"}));break}}catch(i){console.error("Failed to parse WebSocket message:",i)}},T&&clearInterval(T),T=window.setInterval(()=>{j.getState().jobs.some(n=>!["completed","failed","cancelled"].includes(n.status))&&k&&V>0&&Date.now()-V>3e4&&(console.log("WebSocket appears stale (no message for 30s), reconnecting..."),k=!1,f==null||f.close())},15e3)}function ws(){xs(),z&&(clearTimeout(z),z=null),T&&(clearInterval(T),T=null),f&&(f.close(),f=null),k=!1,V=0}function _({children:e}){return m.useEffect(()=>(je(),()=>ws()),[]),o.jsxs("div",{className:"flex flex-col h-screen bg-dark-bg overflow-hidden",children:[o.jsx(et,{}),o.jsx("main",{className:"flex-1 min-h-0 overflow-auto",children:o.jsx("div",{className:"p-4 md:p-6",children:e})}),o.jsx(ps,{})]})}const bs=m.lazy(()=>E(()=>import("./Dashboard-9e9iGL93.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8]))),js=m.lazy(()=>E(()=>import("./Podcasts-CSDTxN_i.js"),__vite__mapDeps([9,1,2,6,10,5,8]))),vs=m.lazy(()=>E(()=>import("./Episodes-CftMn4RC.js"),__vite__mapDeps([11,1,2,12,7,4,3,5,13,8]))),ks=m.lazy(()=>E(()=>import("./Viewer-DISP24hn.js"),__vite__mapDeps([14,1,2,12,3,4,7,5,10,8]))),Ss=m.lazy(()=>E(()=>import("./Videos-Cocmwm2N.js"),__vite__mapDeps([15,1,2,16,17,10,18,13,12,5,6,8]))),Es=m.lazy(()=>E(()=>import("./VideoViewer-BNMHsqY8.js"),__vite__mapDeps([19,8,2,1,16,17,10,7,13,12,5]))),_s=m.lazy(()=>E(()=>import("./Settings-hpMAcb17.js"),__vite__mapDeps([20,1,2,18,4,17,10,7,8]))),Ns=m.lazy(()=>E(()=>import("./Login-69AnUHCg.js"),__vite__mapDeps([21,1,2,8])));function N({children:e}){const{user:t,loading:s,authEnabled:r}=Q();return s?o.jsx("div",{className:"min-h-screen bg-dark-bg flex items-center justify-center",children:o.jsx($,{className:"w-8 h-8 animate-spin text-indigo-500"})}):r?t?o.jsx(o.Fragment,{children:e}):o.jsx(ce,{to:"/login",replace:!0}):o.jsx(o.Fragment,{children:e})}const Ts=()=>o.jsx("div",{className:"min-h-[60vh] flex items-center justify-center",children:o.jsx($,{className:"w-6 h-6 animate-spin text-indigo-500"})});function $s(){const{authEnabled:e,user:t,loading:s}=Q();return s?o.jsx("div",{className:"min-h-screen bg-dark-bg flex items-center justify-center",children:o.jsx($,{className:"w-8 h-8 animate-spin text-indigo-500"})}):o.jsx(m.Suspense,{fallback:o.jsx(Ts,{}),children:o.jsxs(_e,{children:[o.jsx(v,{path:"/login",element:e&&!t?o.jsx(Ns,{}):o.jsx(ce,{to:"/",replace:!0})}),o.jsx(v,{path:"/",element:o.jsx(N,{children:o.jsx(_,{children:o.jsx(bs,{})})})}),o.jsx(v,{path:"/podcasts",element:o.jsx(N,{children:o.jsx(_,{children:o.jsx(js,{})})})}),o.jsx(v,{path:"/podcasts/:pid/episodes",element:o.jsx(N,{children:o.jsx(_,{children:o.jsx(vs,{})})})}),o.jsx(v,{path:"/viewer/:eid",element:o.jsx(N,{children:o.jsx(_,{children:o.jsx(ks,{})})})}),o.jsx(v,{path:"/videos",element:o.jsx(N,{children:o.jsx(_,{children:o.jsx(Ss,{})})})}),o.jsx(v,{path:"/videos/:taskId",element:o.jsx(N,{children:o.jsx(_,{children:o.jsx(Es,{})})})}),o.jsx(v,{path:"/settings",element:o.jsx(N,{children:o.jsx(_,{children:o.jsx(_s,{})})})})]})})}function Cs(){return o.jsx(ze,{children:o.jsx($s,{})})}const ve=m.createContext(null);function Os({children:e}){const[t,s]=m.useState([]),r=m.useCallback(i=>{const h=Math.random().toString(36).substring(7),p={...i,id:h};s(u=>[...u,p]);const y=i.duration??(i.type==="loading"?0:5e3);return y>0&&setTimeout(()=>{s(u=>u.filter(x=>x.id!==h))},y),h},[]),n=m.useCallback(i=>{s(h=>h.filter(p=>p.id!==i))},[]),a=m.useCallback((i,h)=>{s(p=>p.map(y=>y.id===i?{...y,...h}:y))},[]);return o.jsxs(ve.Provider,{value:{toasts:t,addToast:r,removeToast:n,updateToast:a},children:[e,o.jsx(Is,{toasts:t,removeToast:n})]})}function Ls(){const e=m.useContext(ve);if(!e)throw new Error("useToast must be used within a ToastProvider");return e}function Is({toasts:e,removeToast:t}){return o.jsx("div",{className:"fixed bottom-4 right-4 z-50 flex flex-col gap-2 max-w-sm",children:e.map(s=>o.jsx(Ps,{toast:s,onClose:()=>t(s.id)},s.id))})}function Ps({toast:e,onClose:t}){const s={success:o.jsx(ue,{className:"w-5 h-5 text-green-400"}),error:o.jsx(Le,{className:"w-5 h-5 text-red-400"}),info:o.jsx(Ke,{className:"w-5 h-5 text-blue-400"}),loading:o.jsx($,{className:"w-5 h-5 text-indigo-400 animate-spin"})},r={success:"border-green-500/30 bg-green-500/10",error:"border-red-500/30 bg-red-500/10",info:"border-blue-500/30 bg-blue-500/10",loading:"border-indigo-500/30 bg-indigo-500/10"};return o.jsxs("div",{className:`flex items-start gap-3 p-4 rounded-lg border ${r[e.type]} backdrop-blur-sm shadow-lg animate-slide-in`,children:[s[e.type],o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("p",{className:"font-medium text-white",children:e.title}),e.message&&o.jsx("p",{className:"text-sm text-gray-400 mt-0.5",children:e.message})]}),e.type!=="loading"&&o.jsx("button",{onClick:t,className:"text-gray-500 hover:text-white transition-colors",children:o.jsx(J,{className:"w-4 h-4"})})]})}B.createRoot(document.getElementById("root")).render(o.jsx(ie.StrictMode,{children:o.jsx(Ne,{children:o.jsx(Os,{children:o.jsx(Cs,{})})})}));export{Zt as $,Yt as A,ts as B,ue as C,D,Kt as E,Qt as F,Xt as G,Gt as H,Ze as I,Be as J,Qe as K,$ as L,Le as M,ds as N,us as O,Ht as P,cs as Q,X as R,ss as S,Ge as T,ls as U,he as V,os as W,J as X,rs as Y,Mt as Z,Je as _,hs as a,ns as a0,as as a1,Jt as a2,c as a3,Bt as a4,is as a5,Q as a6,Vs as a7,zs as a8,Ms as a9,Ls as b,w as c,Ft as d,qt as e,Tt as f,Js as g,Wt as h,fs as i,Ut as j,$t as k,Ct as l,Vt as m,It as n,Pt as o,zt as p,Lt as q,Ot as r,Dt as s,Rt as t,j as u,At as v,R as w,Ue as x,We as y,es as z};
