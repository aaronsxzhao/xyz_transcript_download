const v="npm2url/dist/index.cjs",y={jsdelivr:t=>`https://cdn.jsdelivr.net/npm/${t}`,unpkg:t=>`https://unpkg.com/${t}`};async function b(t,e){const r=await fetch(t,{signal:e});if(!r.ok)throw r;await r.text()}class D{constructor(){this.providers={...y},this.provider="jsdelivr"}async getFastestProvider(e=5e3,r=v){const n=new AbortController;let i=0;try{return await new Promise((s,o)=>{Promise.all(Object.entries(this.providers).map(async([c,g])=>{try{await b(g(r),n.signal),s(c)}catch{}})).then(()=>o(new Error("All providers failed"))),i=setTimeout(o,e,new Error("Timed out"))})}finally{n.abort(),clearTimeout(i)}}async findFastestProvider(e,r){return this.provider=await this.getFastestProvider(e,r),this.provider}setProvider(e,r){r?this.providers[e]=r:delete this.providers[e]}getFullUrl(e,r=this.provider){if(e.includes("://"))return e;const n=this.providers[r];if(!n)throw new Error(`Provider ${r} not found`);return n(e)}}class H{constructor(){this.listeners=[]}tap(e){return this.listeners.push(e),()=>this.revoke(e)}revoke(e){const r=this.listeners.indexOf(e);r>=0&&this.listeners.splice(r,1)}revokeAll(){this.listeners.splice(0)}call(...e){for(const r of this.listeners)r(...e)}}const S=Math.random().toString(36).slice(2,8);let f=0;function J(){return f+=1,`mm-${S}-${f}`}function z(){}function B(t,e){const r=(n,i)=>e(n,()=>{var s;return(s=n.children)==null?void 0:s.map(o=>r(o,n))},i);return r(t)}function R(t,...e){const r=(t||"").split(" ").filter(Boolean);return e.forEach(n=>{n&&r.indexOf(n)<0&&r.push(n)}),r.join(" ")}function Y(t,e){return(...r)=>e(t,...r)}function T(){const t={};return t.promise=new Promise((e,r)=>{t.resolve=e,t.reject=r}),t}function k(t){const e={};return function(...n){const i=`${n[0]}`;let s=e[i];return s||(s={value:t(...n)},e[i]=s),s.value}}function q(t,e){const r={timer:0};function n(){r.timer&&(window.clearTimeout(r.timer),r.timer=0)}function i(){n(),r.args&&(r.result=t(...r.args))}return function(...o){return n(),r.args=o,r.timer=window.setTimeout(i,e),r.result}}/*! @gera2ld/jsx-dom v2.2.2 | ISC License */const p=1,w=2,N="http://www.w3.org/2000/svg",a="http://www.w3.org/1999/xlink",A={show:a,actuate:a,href:a},E=t=>typeof t=="string"||typeof t=="number",j=t=>(t==null?void 0:t.vtype)===p,P=t=>(t==null?void 0:t.vtype)===w;function F(t,e,...r){return e=Object.assign({},e,{children:r.length===1?r[0]:r}),I(t,e)}function I(t,e){let r;if(typeof t=="string")r=p;else if(typeof t=="function")r=w;else throw new Error("Invalid VNode type");return{vtype:r,type:t,props:e}}function _(t){return t.children}const x={isSvg:!1};function d(t,e){Array.isArray(e)||(e=[e]),e=e.filter(Boolean),e.length&&t.append(...e)}function L(t,e,r){for(const n in e)if(!(n==="key"||n==="children"||n==="ref"))if(n==="dangerouslySetInnerHTML")t.innerHTML=e[n].__html;else if(n==="innerHTML"||n==="textContent"||n==="innerText"||n==="value"&&["textarea","select"].includes(t.tagName)){const i=e[n];i!=null&&(t[n]=i)}else n.startsWith("on")?t[n.toLowerCase()]=e[n]:C(t,n,e[n],r.isSvg)}const O={className:"class",labelFor:"for"};function C(t,e,r,n){if(e=O[e]||e,r===!0)t.setAttribute(e,"");else if(r===!1)t.removeAttribute(e);else{const i=n?A[e]:void 0;i!==void 0?t.setAttributeNS(i,e,r):t.setAttribute(e,r)}}function M(t){return t.reduce((e,r)=>e.concat(r),[])}function l(t,e){return Array.isArray(t)?M(t.map(r=>l(r,e))):u(t,e)}function u(t,e=x){if(t==null||typeof t=="boolean")return null;if(t instanceof Node)return t;if(P(t)){const{type:r,props:n}=t;if(r===_){const s=document.createDocumentFragment();if(n.children){const o=l(n.children,e);d(s,o)}return s}const i=r(n);return u(i,e)}if(E(t))return document.createTextNode(`${t}`);if(j(t)){let r;const{type:n,props:i}=t;if(!e.isSvg&&n==="svg"&&(e=Object.assign({},e,{isSvg:!0})),e.isSvg?r=document.createElementNS(N,n):r=document.createElement(n),L(r,i,e),i.children){let o=e;e.isSvg&&n==="foreignObject"&&(o=Object.assign({},o,{isSvg:!1}));const c=l(i.children,o);c!=null&&d(r,c)}const{ref:s}=i;return typeof s=="function"&&s(r),r}throw new Error("mount: Invalid Vnode!")}function V(t){return u(t)}function m(...t){return V(F(...t))}const $=k(t=>{document.head.append(m("link",{rel:"preload",as:"script",href:t}))}),h={};async function U(t,e){var r;const n=t.type==="script"&&((r=t.data)==null?void 0:r.src)||"";if(t.loaded||(t.loaded=h[n]),!t.loaded){const i=T();if(t.loaded=i.promise,t.type==="script"&&(document.head.append(m("script",{...t.data,onLoad:()=>i.resolve(),onError:i.reject})),n?h[n]=t.loaded:i.resolve()),t.type==="iife"){const{fn:s,getParams:o}=t.data;s(...(o==null?void 0:o(e))||[]),i.resolve()}}await t.loaded}async function G(t,e){t.forEach(r=>{var n;r.type==="script"&&((n=r.data)!=null&&n.src)&&$(r.data.src)}),e={getMarkmap:()=>window.markmap,...e};for(const r of t)await U(r,e)}function K(t){return{type:"script",data:{src:t}}}function W(t){return{type:"stylesheet",data:{href:t}}}export{H,D as U,Y as a,W as b,K as c,q as d,R as e,J as g,G as l,z as n,B as w};
