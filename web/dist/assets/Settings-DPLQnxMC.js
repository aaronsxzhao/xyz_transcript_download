import{j as e}from"./markdown-vhK0I3xZ.js";import{R,r as x}from"./react-vendor-CqdHEJLj.js";import{c as se,U as Pt,S as pe,Q as it,W as zt,Y as Ft,Z as _t,L as z,J as Lt,_ as Le,N as Tt,C as le,$ as Ot,T as Ze,X as Je,a0 as Qt,a1 as Ut,a2 as $t,a3 as et,a4 as Dt,a5 as Bt}from"./index-DP-uypT4.js";import{P as tt,a as st,S as Gt}from"./PlatformIcon-DWtr9EWW.js";import{M as Ht}from"./message-square-DaYXXEWZ.js";import{A as fe,D as be,U as Oe,S as Yt}from"./upload-vXZ544xc.js";import{E as Qe}from"./external-link-DlO8TeUC.js";import{F as lt}from"./file-text-BU7NCz9E.js";import"./syntax-D9IAFz2e.js";/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ot=se("Chrome",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["line",{x1:"21.17",x2:"12",y1:"8",y2:"8",key:"a0cw5f"}],["line",{x1:"3.95",x2:"8.54",y1:"6.06",y2:"14",key:"1kftof"}],["line",{x1:"10.88",x2:"15.46",y1:"21.94",y2:"14",key:"1ymyh8"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qt=se("CircleUser",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vt=se("Cpu",[["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"9",y:"9",width:"6",height:"6",key:"o3kz5p"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wt=se("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ue=se("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Te=se("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xt=se("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]);var Kt=Object.defineProperty,Ie=Object.getOwnPropertySymbols,ct=Object.prototype.hasOwnProperty,dt=Object.prototype.propertyIsEnumerable,rt=(h,c,l)=>c in h?Kt(h,c,{enumerable:!0,configurable:!0,writable:!0,value:l}):h[c]=l,$e=(h,c)=>{for(var l in c||(c={}))ct.call(c,l)&&rt(h,l,c[l]);if(Ie)for(var l of Ie(c))dt.call(c,l)&&rt(h,l,c[l]);return h},De=(h,c)=>{var l={};for(var u in h)ct.call(h,u)&&c.indexOf(u)<0&&(l[u]=h[u]);if(h!=null&&Ie)for(var u of Ie(h))c.indexOf(u)<0&&dt.call(h,u)&&(l[u]=h[u]);return l};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var te;(h=>{const c=class N{constructor(t,r,s,n){if(this.version=t,this.errorCorrectionLevel=r,this.modules=[],this.isFunction=[],t<N.MIN_VERSION||t>N.MAX_VERSION)throw new RangeError("Version value out of range");if(n<-1||n>7)throw new RangeError("Mask value out of range");this.size=t*4+17;let i=[];for(let o=0;o<this.size;o++)i.push(!1);for(let o=0;o<this.size;o++)this.modules.push(i.slice()),this.isFunction.push(i.slice());this.drawFunctionPatterns();const d=this.addEccAndInterleave(s);if(this.drawCodewords(d),n==-1){let o=1e9;for(let b=0;b<8;b++){this.applyMask(b),this.drawFormatBits(b);const m=this.getPenaltyScore();m<o&&(n=b,o=m),this.applyMask(b)}}v(0<=n&&n<=7),this.mask=n,this.applyMask(n),this.drawFormatBits(n),this.isFunction=[]}static encodeText(t,r){const s=h.QrSegment.makeSegments(t);return N.encodeSegments(s,r)}static encodeBinary(t,r){const s=h.QrSegment.makeBytes(t);return N.encodeSegments([s],r)}static encodeSegments(t,r,s=1,n=40,i=-1,d=!0){if(!(N.MIN_VERSION<=s&&s<=n&&n<=N.MAX_VERSION)||i<-1||i>7)throw new RangeError("Invalid value");let o,b;for(o=s;;o++){const f=N.getNumDataCodewords(o,r)*8,j=k.getTotalBits(t,o);if(j<=f){b=j;break}if(o>=n)throw new RangeError("Data too long")}for(const f of[N.Ecc.MEDIUM,N.Ecc.QUARTILE,N.Ecc.HIGH])d&&b<=N.getNumDataCodewords(o,f)*8&&(r=f);let m=[];for(const f of t){l(f.mode.modeBits,4,m),l(f.numChars,f.mode.numCharCountBits(o),m);for(const j of f.getData())m.push(j)}v(m.length==b);const M=N.getNumDataCodewords(o,r)*8;v(m.length<=M),l(0,Math.min(4,M-m.length),m),l(0,(8-m.length%8)%8,m),v(m.length%8==0);for(let f=236;m.length<M;f^=253)l(f,8,m);let g=[];for(;g.length*8<m.length;)g.push(0);return m.forEach((f,j)=>g[j>>>3]|=f<<7-(j&7)),new N(o,r,g,i)}getModule(t,r){return 0<=t&&t<this.size&&0<=r&&r<this.size&&this.modules[r][t]}getModules(){return this.modules}drawFunctionPatterns(){for(let s=0;s<this.size;s++)this.setFunctionModule(6,s,s%2==0),this.setFunctionModule(s,6,s%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const t=this.getAlignmentPatternPositions(),r=t.length;for(let s=0;s<r;s++)for(let n=0;n<r;n++)s==0&&n==0||s==0&&n==r-1||s==r-1&&n==0||this.drawAlignmentPattern(t[s],t[n]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(t){const r=this.errorCorrectionLevel.formatBits<<3|t;let s=r;for(let i=0;i<10;i++)s=s<<1^(s>>>9)*1335;const n=(r<<10|s)^21522;v(n>>>15==0);for(let i=0;i<=5;i++)this.setFunctionModule(8,i,u(n,i));this.setFunctionModule(8,7,u(n,6)),this.setFunctionModule(8,8,u(n,7)),this.setFunctionModule(7,8,u(n,8));for(let i=9;i<15;i++)this.setFunctionModule(14-i,8,u(n,i));for(let i=0;i<8;i++)this.setFunctionModule(this.size-1-i,8,u(n,i));for(let i=8;i<15;i++)this.setFunctionModule(8,this.size-15+i,u(n,i));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let t=this.version;for(let s=0;s<12;s++)t=t<<1^(t>>>11)*7973;const r=this.version<<12|t;v(r>>>18==0);for(let s=0;s<18;s++){const n=u(r,s),i=this.size-11+s%3,d=Math.floor(s/3);this.setFunctionModule(i,d,n),this.setFunctionModule(d,i,n)}}drawFinderPattern(t,r){for(let s=-4;s<=4;s++)for(let n=-4;n<=4;n++){const i=Math.max(Math.abs(n),Math.abs(s)),d=t+n,o=r+s;0<=d&&d<this.size&&0<=o&&o<this.size&&this.setFunctionModule(d,o,i!=2&&i!=4)}}drawAlignmentPattern(t,r){for(let s=-2;s<=2;s++)for(let n=-2;n<=2;n++)this.setFunctionModule(t+n,r+s,Math.max(Math.abs(n),Math.abs(s))!=1)}setFunctionModule(t,r,s){this.modules[r][t]=s,this.isFunction[r][t]=!0}addEccAndInterleave(t){const r=this.version,s=this.errorCorrectionLevel;if(t.length!=N.getNumDataCodewords(r,s))throw new RangeError("Invalid argument");const n=N.NUM_ERROR_CORRECTION_BLOCKS[s.ordinal][r],i=N.ECC_CODEWORDS_PER_BLOCK[s.ordinal][r],d=Math.floor(N.getNumRawDataModules(r)/8),o=n-d%n,b=Math.floor(d/n);let m=[];const M=N.reedSolomonComputeDivisor(i);for(let f=0,j=0;f<n;f++){let E=t.slice(j,j+b-i+(f<o?0:1));j+=E.length;const O=N.reedSolomonComputeRemainder(E,M);f<o&&E.push(0),m.push(E.concat(O))}let g=[];for(let f=0;f<m[0].length;f++)m.forEach((j,E)=>{(f!=b-i||E>=o)&&g.push(j[f])});return v(g.length==d),g}drawCodewords(t){if(t.length!=Math.floor(N.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let r=0;for(let s=this.size-1;s>=1;s-=2){s==6&&(s=5);for(let n=0;n<this.size;n++)for(let i=0;i<2;i++){const d=s-i,b=(s+1&2)==0?this.size-1-n:n;!this.isFunction[b][d]&&r<t.length*8&&(this.modules[b][d]=u(t[r>>>3],7-(r&7)),r++)}}v(r==t.length*8)}applyMask(t){if(t<0||t>7)throw new RangeError("Mask value out of range");for(let r=0;r<this.size;r++)for(let s=0;s<this.size;s++){let n;switch(t){case 0:n=(s+r)%2==0;break;case 1:n=r%2==0;break;case 2:n=s%3==0;break;case 3:n=(s+r)%3==0;break;case 4:n=(Math.floor(s/3)+Math.floor(r/2))%2==0;break;case 5:n=s*r%2+s*r%3==0;break;case 6:n=(s*r%2+s*r%3)%2==0;break;case 7:n=((s+r)%2+s*r%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[r][s]&&n&&(this.modules[r][s]=!this.modules[r][s])}}getPenaltyScore(){let t=0;for(let i=0;i<this.size;i++){let d=!1,o=0,b=[0,0,0,0,0,0,0];for(let m=0;m<this.size;m++)this.modules[i][m]==d?(o++,o==5?t+=N.PENALTY_N1:o>5&&t++):(this.finderPenaltyAddHistory(o,b),d||(t+=this.finderPenaltyCountPatterns(b)*N.PENALTY_N3),d=this.modules[i][m],o=1);t+=this.finderPenaltyTerminateAndCount(d,o,b)*N.PENALTY_N3}for(let i=0;i<this.size;i++){let d=!1,o=0,b=[0,0,0,0,0,0,0];for(let m=0;m<this.size;m++)this.modules[m][i]==d?(o++,o==5?t+=N.PENALTY_N1:o>5&&t++):(this.finderPenaltyAddHistory(o,b),d||(t+=this.finderPenaltyCountPatterns(b)*N.PENALTY_N3),d=this.modules[m][i],o=1);t+=this.finderPenaltyTerminateAndCount(d,o,b)*N.PENALTY_N3}for(let i=0;i<this.size-1;i++)for(let d=0;d<this.size-1;d++){const o=this.modules[i][d];o==this.modules[i][d+1]&&o==this.modules[i+1][d]&&o==this.modules[i+1][d+1]&&(t+=N.PENALTY_N2)}let r=0;for(const i of this.modules)r=i.reduce((d,o)=>d+(o?1:0),r);const s=this.size*this.size,n=Math.ceil(Math.abs(r*20-s*10)/s)-1;return v(0<=n&&n<=9),t+=n*N.PENALTY_N4,v(0<=t&&t<=2568888),t}getAlignmentPatternPositions(){if(this.version==1)return[];{const t=Math.floor(this.version/7)+2,r=this.version==32?26:Math.ceil((this.version*4+4)/(t*2-2))*2;let s=[6];for(let n=this.size-7;s.length<t;n-=r)s.splice(1,0,n);return s}}static getNumRawDataModules(t){if(t<N.MIN_VERSION||t>N.MAX_VERSION)throw new RangeError("Version number out of range");let r=(16*t+128)*t+64;if(t>=2){const s=Math.floor(t/7)+2;r-=(25*s-10)*s-55,t>=7&&(r-=36)}return v(208<=r&&r<=29648),r}static getNumDataCodewords(t,r){return Math.floor(N.getNumRawDataModules(t)/8)-N.ECC_CODEWORDS_PER_BLOCK[r.ordinal][t]*N.NUM_ERROR_CORRECTION_BLOCKS[r.ordinal][t]}static reedSolomonComputeDivisor(t){if(t<1||t>255)throw new RangeError("Degree out of range");let r=[];for(let n=0;n<t-1;n++)r.push(0);r.push(1);let s=1;for(let n=0;n<t;n++){for(let i=0;i<r.length;i++)r[i]=N.reedSolomonMultiply(r[i],s),i+1<r.length&&(r[i]^=r[i+1]);s=N.reedSolomonMultiply(s,2)}return r}static reedSolomonComputeRemainder(t,r){let s=r.map(n=>0);for(const n of t){const i=n^s.shift();s.push(0),r.forEach((d,o)=>s[o]^=N.reedSolomonMultiply(d,i))}return s}static reedSolomonMultiply(t,r){if(t>>>8||r>>>8)throw new RangeError("Byte out of range");let s=0;for(let n=7;n>=0;n--)s=s<<1^(s>>>7)*285,s^=(r>>>n&1)*t;return v(s>>>8==0),s}finderPenaltyCountPatterns(t){const r=t[1];v(r<=this.size*3);const s=r>0&&t[2]==r&&t[3]==r*3&&t[4]==r&&t[5]==r;return(s&&t[0]>=r*4&&t[6]>=r?1:0)+(s&&t[6]>=r*4&&t[0]>=r?1:0)}finderPenaltyTerminateAndCount(t,r,s){return t&&(this.finderPenaltyAddHistory(r,s),r=0),r+=this.size,this.finderPenaltyAddHistory(r,s),this.finderPenaltyCountPatterns(s)}finderPenaltyAddHistory(t,r){r[0]==0&&(t+=this.size),r.pop(),r.unshift(t)}};c.MIN_VERSION=1,c.MAX_VERSION=40,c.PENALTY_N1=3,c.PENALTY_N2=3,c.PENALTY_N3=40,c.PENALTY_N4=10,c.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],c.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],h.QrCode=c;function l(w,t,r){if(t<0||t>31||w>>>t)throw new RangeError("Value out of range");for(let s=t-1;s>=0;s--)r.push(w>>>s&1)}function u(w,t){return(w>>>t&1)!=0}function v(w){if(!w)throw new Error("Assertion error")}const p=class C{constructor(t,r,s){if(this.mode=t,this.numChars=r,this.bitData=s,r<0)throw new RangeError("Invalid argument");this.bitData=s.slice()}static makeBytes(t){let r=[];for(const s of t)l(s,8,r);return new C(C.Mode.BYTE,t.length,r)}static makeNumeric(t){if(!C.isNumeric(t))throw new RangeError("String contains non-numeric characters");let r=[];for(let s=0;s<t.length;){const n=Math.min(t.length-s,3);l(parseInt(t.substring(s,s+n),10),n*3+1,r),s+=n}return new C(C.Mode.NUMERIC,t.length,r)}static makeAlphanumeric(t){if(!C.isAlphanumeric(t))throw new RangeError("String contains unencodable characters in alphanumeric mode");let r=[],s;for(s=0;s+2<=t.length;s+=2){let n=C.ALPHANUMERIC_CHARSET.indexOf(t.charAt(s))*45;n+=C.ALPHANUMERIC_CHARSET.indexOf(t.charAt(s+1)),l(n,11,r)}return s<t.length&&l(C.ALPHANUMERIC_CHARSET.indexOf(t.charAt(s)),6,r),new C(C.Mode.ALPHANUMERIC,t.length,r)}static makeSegments(t){return t==""?[]:C.isNumeric(t)?[C.makeNumeric(t)]:C.isAlphanumeric(t)?[C.makeAlphanumeric(t)]:[C.makeBytes(C.toUtf8ByteArray(t))]}static makeEci(t){let r=[];if(t<0)throw new RangeError("ECI assignment value out of range");if(t<128)l(t,8,r);else if(t<16384)l(2,2,r),l(t,14,r);else if(t<1e6)l(6,3,r),l(t,21,r);else throw new RangeError("ECI assignment value out of range");return new C(C.Mode.ECI,0,r)}static isNumeric(t){return C.NUMERIC_REGEX.test(t)}static isAlphanumeric(t){return C.ALPHANUMERIC_REGEX.test(t)}getData(){return this.bitData.slice()}static getTotalBits(t,r){let s=0;for(const n of t){const i=n.mode.numCharCountBits(r);if(n.numChars>=1<<i)return 1/0;s+=4+i+n.bitData.length}return s}static toUtf8ByteArray(t){t=encodeURI(t);let r=[];for(let s=0;s<t.length;s++)t.charAt(s)!="%"?r.push(t.charCodeAt(s)):(r.push(parseInt(t.substring(s+1,s+3),16)),s+=2);return r}};p.NUMERIC_REGEX=/^[0-9]*$/,p.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,p.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let k=p;h.QrSegment=p})(te||(te={}));(h=>{(c=>{const l=class{constructor(v,p){this.ordinal=v,this.formatBits=p}};l.LOW=new l(0,1),l.MEDIUM=new l(1,0),l.QUARTILE=new l(2,3),l.HIGH=new l(3,2),c.Ecc=l})(h.QrCode||(h.QrCode={}))})(te||(te={}));(h=>{(c=>{const l=class{constructor(v,p){this.modeBits=v,this.numBitsCharCount=p}numCharCountBits(v){return this.numBitsCharCount[Math.floor((v+7)/17)]}};l.NUMERIC=new l(1,[10,12,14]),l.ALPHANUMERIC=new l(2,[9,11,13]),l.BYTE=new l(4,[8,16,16]),l.KANJI=new l(8,[8,10,12]),l.ECI=new l(7,[0,0,0]),c.Mode=l})(h.QrSegment||(h.QrSegment={}))})(te||(te={}));var oe=te;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var Zt={L:oe.QrCode.Ecc.LOW,M:oe.QrCode.Ecc.MEDIUM,Q:oe.QrCode.Ecc.QUARTILE,H:oe.QrCode.Ecc.HIGH},ut=128,ht="L",mt="#FFFFFF",xt="#000000",gt=!1,pt=1,Jt=4,es=0,ts=.1;function ft(h,c=0){const l=[];return h.forEach(function(u,v){let p=null;u.forEach(function(k,w){if(!k&&p!==null){l.push(`M${p+c} ${v+c}h${w-p}v1H${p+c}z`),p=null;return}if(w===u.length-1){if(!k)return;p===null?l.push(`M${w+c},${v+c} h1v1H${w+c}z`):l.push(`M${p+c},${v+c} h${w+1-p}v1H${p+c}z`);return}k&&p===null&&(p=w)})}),l.join("")}function bt(h,c){return h.slice().map((l,u)=>u<c.y||u>=c.y+c.h?l:l.map((v,p)=>p<c.x||p>=c.x+c.w?v:!1))}function ss(h,c,l,u){if(u==null)return null;const v=h.length+l*2,p=Math.floor(c*ts),k=v/c,w=(u.width||p)*k,t=(u.height||p)*k,r=u.x==null?h.length/2-w/2:u.x*k,s=u.y==null?h.length/2-t/2:u.y*k,n=u.opacity==null?1:u.opacity;let i=null;if(u.excavate){let o=Math.floor(r),b=Math.floor(s),m=Math.ceil(w+r-o),M=Math.ceil(t+s-b);i={x:o,y:b,w:m,h:M}}const d=u.crossOrigin;return{x:r,y:s,h:t,w,excavation:i,opacity:n,crossOrigin:d}}function rs(h,c){return c!=null?Math.max(Math.floor(c),0):h?Jt:es}function yt({value:h,level:c,minVersion:l,includeMargin:u,marginSize:v,imageSettings:p,size:k,boostLevel:w}){let t=R.useMemo(()=>{const o=(Array.isArray(h)?h:[h]).reduce((b,m)=>(b.push(...oe.QrSegment.makeSegments(m)),b),[]);return oe.QrCode.encodeSegments(o,Zt[c],l,void 0,void 0,w)},[h,c,l,w]);const{cells:r,margin:s,numCells:n,calculatedImageSettings:i}=R.useMemo(()=>{let d=t.getModules();const o=rs(u,v),b=d.length+o*2,m=ss(d,k,o,p);return{cells:d,margin:o,numCells:b,calculatedImageSettings:m}},[t,k,p,u,v]);return{qrcode:t,margin:s,cells:r,numCells:n,calculatedImageSettings:i}}var as=function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0}(),ns=R.forwardRef(function(c,l){const u=c,{value:v,size:p=ut,level:k=ht,bgColor:w=mt,fgColor:t=xt,includeMargin:r=gt,minVersion:s=pt,boostLevel:n,marginSize:i,imageSettings:d}=u,b=De(u,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:m}=b,M=De(b,["style"]),g=d==null?void 0:d.src,f=R.useRef(null),j=R.useRef(null),E=R.useCallback(D=>{f.current=D,typeof l=="function"?l(D):l&&(l.current=D)},[l]),[O,ce]=R.useState(!1),{margin:Y,cells:re,numCells:L,calculatedImageSettings:I}=yt({value:v,level:k,minVersion:s,boostLevel:n,includeMargin:r,marginSize:i,imageSettings:d,size:p});R.useEffect(()=>{if(f.current!=null){const D=f.current,Q=D.getContext("2d");if(!Q)return;let de=re;const W=j.current,ue=I!=null&&W!==null&&W.complete&&W.naturalHeight!==0&&W.naturalWidth!==0;ue&&I.excavation!=null&&(de=bt(re,I.excavation));const A=window.devicePixelRatio||1;D.height=D.width=p*A;const ve=p/L*A;Q.scale(ve,ve),Q.fillStyle=w,Q.fillRect(0,0,L,L),Q.fillStyle=t,as?Q.fill(new Path2D(ft(de,Y))):re.forEach(function(he,ee){he.forEach(function(Ae,me){Ae&&Q.fillRect(me+Y,ee+Y,1,1)})}),I&&(Q.globalAlpha=I.opacity),ue&&Q.drawImage(W,I.x+Y,I.y+Y,I.w,I.h)}}),R.useEffect(()=>{ce(!1)},[g]);const ye=$e({height:p,width:p},m);let J=null;return g!=null&&(J=R.createElement("img",{src:g,key:g,style:{display:"none"},onLoad:()=>{ce(!0)},ref:j,crossOrigin:I==null?void 0:I.crossOrigin})),R.createElement(R.Fragment,null,R.createElement("canvas",$e({style:ye,height:p,width:p,ref:E,role:"img"},M)),J)});ns.displayName="QRCodeCanvas";var vt=R.forwardRef(function(c,l){const u=c,{value:v,size:p=ut,level:k=ht,bgColor:w=mt,fgColor:t=xt,includeMargin:r=gt,minVersion:s=pt,boostLevel:n,title:i,marginSize:d,imageSettings:o}=u,b=De(u,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:m,cells:M,numCells:g,calculatedImageSettings:f}=yt({value:v,level:k,minVersion:s,boostLevel:n,includeMargin:r,marginSize:d,imageSettings:o,size:p});let j=M,E=null;o!=null&&f!=null&&(f.excavation!=null&&(j=bt(M,f.excavation)),E=R.createElement("image",{href:o.src,height:f.h,width:f.w,x:f.x+m,y:f.y+m,preserveAspectRatio:"none",opacity:f.opacity,crossOrigin:f.crossOrigin}));const O=ft(j,m);return R.createElement("svg",$e({height:p,width:p,viewBox:`0 0 ${g} ${g}`,ref:l,role:"img"},b),!!i&&R.createElement("title",null,i),R.createElement("path",{fill:w,d:`M0,0 h${g}v${g}H0z`,shapeRendering:"crispEdges"}),R.createElement("path",{fill:t,d:O,shapeRendering:"crispEdges"}),E)});vt.displayName="QRCodeSVG";const at=[{value:"whisper-large-v3",label:"whisper-large-v3",description:"More accurate, slower"},{value:"whisper-large-v3-turbo",label:"whisper-large-v3-turbo",description:"Faster, slightly less accurate"}],is=[{value:"",label:"Server Default"},{value:"vertex_ai/gemini-3-pro-preview",label:"Gemini 3 Pro"},{value:"vertex_ai/gemini-3-flash-preview",label:"Gemini 3 Flash"},{value:"vertex_ai/gemini-2.5-pro",label:"Gemini 2.5 Pro"},{value:"vertex_ai/gemini-2.5-flash",label:"Gemini 2.5 Flash"},{value:"vertex_ai/gemini-2.5-flash-image",label:"Gemini 2.5 Flash Image"},{value:"vertex_ai/gemini-2.5-flash-lite",label:"Gemini 2.5 Flash Lite"},{value:"vertex_ai/gemini-2.5-flash-lite-preview-09-2025",label:"Gemini 2.5 Flash Lite (09-2025)"},{value:"gemini-2.5-flash-fb",label:"Gemini 2.5 Flash (Firebase)"},{value:"gemini-2.5-pro-fb",label:"Gemini 2.5 Pro (Firebase)"},{value:"openrouter/openai/gpt-4o",label:"GPT-4o (OpenRouter)"},{value:"openrouter/openai/gpt-5-chat",label:"GPT-5 (OpenRouter)"},{value:"openrouter/openai/gpt-5-mini",label:"GPT-5 Mini (OpenRouter)"},{value:"openrouter/openai/o3-mini",label:"o3-mini (OpenRouter)"},{value:"openrouter/anthropic/claude-sonnet-4",label:"Claude Sonnet 4 (OpenRouter)"},{value:"openrouter/anthropic/claude-sonnet-4.5",label:"Claude Sonnet 4.5 (OpenRouter)"},{value:"openrouter/google/gemini-2.5-flash",label:"Gemini 2.5 Flash (OpenRouter)"},{value:"openrouter/google/gemini-2.5-pro",label:"Gemini 2.5 Pro (OpenRouter)"},{value:"openrouter/x-ai/grok-3-mini",label:"Grok 3 Mini (OpenRouter)"},{value:"openrouter/x-ai/grok-4",label:"Grok 4 (OpenRouter)"},{value:"openrouter/x-ai/grok-4-fast",label:"Grok 4 Fast (OpenRouter)"}],ls=[{id:"general",label:"General",icon:e.jsx(Gt,{size:16})},{id:"accounts",label:"Platform Accounts",icon:e.jsx(qt,{size:16})},{id:"tools",label:"Tools & Data",icon:e.jsx(Xt,{size:16})}];function vs(){var Ke;const[h,c]=x.useState("general"),[l,u]=x.useState(null),[v,p]=x.useState(!0),[k,w]=x.useState(""),[t,r]=x.useState(""),[s,n]=x.useState(!1),[i,d]=x.useState(null),[o,b]=x.useState([]),[m,M]=x.useState(!1),[g,f]=x.useState(!1),[j,E]=x.useState(null),[O,ce]=x.useState(""),[Y,re]=x.useState(!1),[L,I]=x.useState(null),[ye,J]=x.useState(null),[D,Q]=x.useState(null),[de,W]=x.useState(!1),ue=["bilibili","youtube","douyin","kuaishou"],[A,ve]=x.useState("bilibili"),[he,ee]=x.useState([]),Ae=120,me=3,Nt=2e3,[jt,Pe]=x.useState(""),[U,q]=x.useState("idle"),[Ne,B]=x.useState(""),[je,ze]=x.useState(0),G=x.useRef(null),F=x.useRef(null),X=x.useRef(0),ae=x.useRef(!1),H=x.useRef(0),wt=x.useRef("bilibili"),[xe,V]=x.useState(""),[ne,we]=x.useState(!1),[ke,Ce]=x.useState(!1),[Ee,Be]=x.useState("chrome"),Re=x.useRef(null),Ge=[{value:"chrome",label:"Chrome"},{value:"firefox",label:"Firefox"},{value:"edge",label:"Edge"},{value:"safari",label:"Safari"},{value:"brave",label:"Brave"}],[ge,kt]=x.useState(()=>localStorage.getItem("notion_api_key")||""),[Se,ie]=x.useState(null),[He,Ye]=x.useState(!1),qe=x.useCallback(async a=>{we(!0),V("");try{const y=await Pt(a,Ee);if(y.success){V(`✅ ${y.message}`);const S=await pe();ee(S.cookies)}else V(`⚠️ ${y.message}`),Ce(!0)}catch(y){V(`❌ ${y instanceof Error?y.message:"Import failed"}`),Ce(!0)}finally{we(!1)}},[Ee]),Ve=x.useCallback(async(a,y)=>{we(!0),V("");try{const S=await it(a,y);V(`✅ ${S.message}`);const Z=await pe();ee(Z.cookies)}catch(S){V(`❌ ${S instanceof Error?S.message:"Upload failed"}`)}finally{we(!1),Re.current&&(Re.current.value="")}},[]),K=x.useCallback(()=>{G.current&&(clearInterval(G.current),G.current=null),F.current&&(clearInterval(F.current),F.current=null),X.current=0,ae.current=!1,H.current=0},[]),Me=x.useCallback(async(a,y=!0)=>{y?(K(),H.current=0):(G.current&&(clearInterval(G.current),G.current=null),F.current&&(clearInterval(F.current),F.current=null)),q("loading"),y&&B(""),ae.current=!1,wt.current=a;const S=y?++X.current:X.current,Z=a==="bilibili"?zt:Ft,P=a==="bilibili"?$=>Qt($):$=>Ut($),_=a==="bilibili"?"BiliBili":"Douyin";try{const $=await Z();if(X.current!==S)return;const It="qr_url"in $?$.qr_url:"",At=a==="bilibili"?$.qrcode_key:$.token;Pe(It),q("waiting"),B(H.current>0?`New QR code ready (attempt ${H.current+1}) — scan and confirm quickly`:`Open ${_} app and scan the QR code`),ze(Ae),ae.current=!1,F.current=setInterval(()=>{ze(T=>T<=1?0:T-1)},1e3),G.current=setInterval(async()=>{if(X.current===S)try{const T=await P(At);if(X.current!==S)return;if(T.status==="success"){q("success"),B(`Login successful! ${_} cookies saved.`),K();const _e=await pe();ee(_e.cookies)}else if(T.status==="scanned")ae.current=!0,q("scanned"),B(`Scanned! Please confirm on your phone quickly (${_} QR codes expire fast)...`),F.current&&(clearInterval(F.current),F.current=null),ze(0);else if(T.status==="expired"){if(G.current&&(clearInterval(G.current),G.current=null),F.current&&(clearInterval(F.current),F.current=null),H.current++,H.current>=me){q("expired"),B(ae.current?`QR expired ${me} times — you scanned but didn't confirm fast enough. Click "Generate QR Code" to try again.`:`QR expired ${me} times. Click "Generate QR Code" to try again.`),H.current=0;return}if(ae.current?B("QR expired before confirmation — generating a new one, please confirm faster..."):B("QR expired, generating a new one..."),q("loading"),await new Promise(_e=>setTimeout(_e,Nt)),X.current!==S)return;Me(a,!1)}else T.status==="waiting"&&T.message&&T.message!=="Waiting for scan"&&B(T.message)}catch(T){console.warn("QR poll error:",T)}},2e3)}catch{X.current===S&&(q("error"),B(H.current>0?`Failed to generate QR code after ${H.current+1} attempts. ${_} may be rate-limiting. Wait a moment and try again.`:"Failed to generate QR code. Check your network connection."),H.current=0)}},[K]),Ct=x.useCallback(a=>{K(),q("idle"),Pe(""),B(""),V(""),Ce(!1),ve(a)},[K]);x.useEffect(()=>()=>{K()},[K]),x.useEffect(()=>{Et()},[]),x.useEffect(()=>{pe().then(a=>ee(a.cookies)).catch(()=>{})},[]),x.useEffect(()=>{if(l){const a=localStorage.getItem("whisper_model")||l.whisper_model,y=localStorage.getItem("llm_model")||l.llm_model;w(a),r(y)}},[l]);async function Et(){try{const a=await _t();u(a)}catch(a){console.error("Failed to load settings:",a)}finally{p(!1)}}async function Rt(){n(!0),d(null);try{localStorage.setItem("whisper_model",k),localStorage.setItem("llm_model",t),await $t({whisper_model:k,llm_model:t}),d("Settings saved successfully!"),setTimeout(()=>d(null),3e3)}catch(a){console.error("Failed to save settings:",a),d("Failed to save settings")}finally{n(!1)}}async function St(){M(!0),E(null);try{const a=await et("/api/truncated");if(a.ok){const y=await a.json();b(y.truncated||[]),y.truncated.length===0&&E("No truncated transcripts found. All data looks good!")}}catch(a){console.error("Failed to check truncated:",a),E("Failed to check for truncated data")}finally{M(!1)}}async function Mt(){if(confirm(`This will delete ${o.length} truncated transcripts and their summaries. Continue?`)){f(!0);try{const a=await et("/api/truncated/cleanup",{method:"POST"});if(a.ok){const y=await a.json();E(`Cleaned up ${y.deleted.length} truncated transcripts. You can now reprocess these episodes.`),b([])}}catch(a){console.error("Failed to cleanup:",a),E("Failed to clean up truncated data")}finally{f(!1)}}}function We(a){return`${Math.floor(a/60)} min`}async function Xe(){if(O.trim()){re(!0),J(null),I(null);try{const a=await Dt(O.trim());I(a),ce("")}catch(a){console.error("Failed to import subscriptions:",a),J(a instanceof Error?a.message:"Failed to import subscriptions")}finally{re(!1)}}}if(v)return e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(z,{className:"w-8 h-8 animate-spin text-indigo-500"})});const Fe=a=>a==="bilibili"?"BiliBili":a==="youtube"?"YouTube":a.charAt(0).toUpperCase()+a.slice(1);return e.jsxs("div",{className:"max-w-2xl",children:[e.jsxs("div",{className:"mb-5",children:[e.jsx("h1",{className:"text-2xl font-bold text-white mb-1",children:"Settings"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Configure AI models, platform logins, and system tools"})]}),e.jsx("div",{className:"flex gap-1 p-1 bg-dark-surface border border-dark-border rounded-xl mb-5",children:ls.map(a=>e.jsxs("button",{onClick:()=>c(a.id),className:`flex-1 flex items-center justify-center gap-2 px-4 py-2.5 text-sm font-medium rounded-lg transition-colors ${h===a.id?"bg-indigo-600 text-white":"text-gray-400 hover:text-white hover:bg-dark-hover"}`,children:[a.icon,a.label]},a.id))}),h==="general"&&e.jsxs("div",{className:"space-y-5",children:[e.jsxs("section",{className:"p-5 bg-dark-surface border border-dark-border rounded-xl",children:[e.jsxs("h2",{className:"text-base font-semibold text-white mb-3 flex items-center gap-2",children:[e.jsx(Vt,{className:"text-blue-500",size:18}),"Transcription (Whisper)"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(nt,{label:"Provider",value:(l==null?void 0:l.whisper_mode)==="api"?"Groq API (cloud)":"Local model"}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 py-2 border-b border-dark-border",children:[e.jsx("span",{className:"text-gray-400 text-sm",children:"Model"}),e.jsx("select",{value:k,onChange:a=>w(a.target.value),className:"bg-dark-hover border border-dark-border text-white text-sm rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent w-full sm:w-auto",children:at.map(a=>e.jsx("option",{value:a.value,children:a.label},a.value))})]}),e.jsx("p",{className:"text-xs text-gray-500",children:((Ke=at.find(a=>a.value===k))==null?void 0:Ke.description)||"Select a model"})]})]}),e.jsxs("section",{className:"p-5 bg-dark-surface border border-dark-border rounded-xl",children:[e.jsxs("h2",{className:"text-base font-semibold text-white mb-3 flex items-center gap-2",children:[e.jsx(Ht,{className:"text-purple-500",size:18}),"LLM Configuration"]}),e.jsx("div",{className:"space-y-3",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 py-2 border-b border-dark-border",children:[e.jsx("span",{className:"text-gray-400 text-sm",children:"Model"}),e.jsx("select",{value:t,onChange:a=>r(a.target.value),className:"bg-dark-hover border border-dark-border text-white text-sm rounded-lg px-3 py-2 focus:ring-2 focus:ring-purple-500 focus:border-transparent w-full sm:w-auto sm:max-w-[220px] truncate",children:is.map(a=>e.jsx("option",{value:a.value,children:a.label},a.value))})]})})]}),e.jsxs("section",{className:"p-5 bg-dark-surface border border-dark-border rounded-xl",children:[e.jsxs("h2",{className:"text-base font-semibold text-white mb-3 flex items-center gap-2",children:[e.jsx(Lt,{className:"text-green-500",size:18}),"Daemon"]}),e.jsx(nt,{label:"Check Interval",value:l?l.check_interval>=86400?`${Math.round(l.check_interval/86400)} day(s)`:l.check_interval>=3600?`${Math.round(l.check_interval/3600)} hour(s)`:`${Math.floor(l.check_interval/60)} minutes`:"-"})]}),e.jsxs("section",{className:"p-5 bg-dark-surface border border-dark-border rounded-xl",children:[e.jsxs("h2",{className:"text-base font-semibold text-white mb-3 flex items-center gap-2",children:[e.jsx(Wt,{className:"text-orange-500",size:18}),"Notion Export"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-gray-400 text-sm",children:"Integration Token"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"password",value:ge,onChange:a=>{kt(a.target.value),ie(null)},placeholder:"ntn_...",className:"flex-1 bg-dark-hover border border-dark-border text-white text-sm rounded-lg px-3 py-2 focus:ring-2 focus:ring-orange-500 focus:border-transparent font-mono"}),e.jsx("button",{onClick:()=>{localStorage.setItem("notion_api_key",ge.trim()),ie(null)},className:"px-3 py-2 bg-dark-hover hover:bg-dark-border text-white text-sm rounded-lg transition-colors",children:e.jsx(Ue,{size:14})})]})]}),e.jsxs("button",{onClick:async()=>{if(!ge.trim()){ie({ok:!1,message:"Enter a Notion API key first"});return}localStorage.setItem("notion_api_key",ge.trim()),Ye(!0),ie(null);try{const a=await Tt();ie({ok:!0,message:`Connected! Found ${a.pages.length} accessible page${a.pages.length!==1?"s":""}.`})}catch(a){ie({ok:!1,message:a instanceof Error?a.message:"Connection failed"})}finally{Ye(!1)}},disabled:He||!ge.trim(),className:"flex items-center gap-2 px-4 py-2 bg-dark-hover hover:bg-dark-border text-white rounded-lg transition-colors text-sm disabled:opacity-50",children:[He?e.jsx(z,{size:14,className:"animate-spin"}):e.jsx(Le,{size:14}),"Test Connection"]}),Se&&e.jsxs("div",{className:`p-2.5 rounded-lg text-xs ${Se.ok?"bg-green-500/10 border border-green-500/30 text-green-400":"bg-red-500/10 border border-red-500/30 text-red-400"}`,children:[Se.ok?e.jsx(le,{size:12,className:"inline mr-1.5"}):e.jsx(fe,{size:12,className:"inline mr-1.5"}),Se.message]}),e.jsxs("div",{className:"p-3 bg-dark-hover/50 rounded-lg space-y-1.5",children:[e.jsx("p",{className:"text-xs text-gray-300 font-medium",children:"Setup instructions:"}),e.jsxs("ol",{className:"text-xs text-gray-400 space-y-1 list-decimal list-inside",children:[e.jsxs("li",{children:["Go to"," ",e.jsxs("a",{href:"https://www.notion.so/profile/integrations",target:"_blank",rel:"noopener noreferrer",className:"text-orange-400 hover:text-orange-300",children:["Notion Integrations ",e.jsx(Qe,{size:10,className:"inline"})]})," ","and create an integration"]}),e.jsx("li",{children:"Copy the Internal Integration Secret and paste it above"}),e.jsxs("li",{children:["In Notion, open the page you want to export to, click ",e.jsx("strong",{className:"text-white",children:"..."})," > ",e.jsx("strong",{className:"text-white",children:"Connect to"})," > select your integration"]})]})]})]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[e.jsxs("button",{onClick:Rt,disabled:s,className:"inline-flex items-center gap-2 px-5 py-2.5 bg-indigo-600 hover:bg-indigo-700 text-white text-sm font-medium rounded-lg transition-colors disabled:opacity-50",children:[s?e.jsx(z,{size:16,className:"animate-spin"}):e.jsx(Ue,{size:16}),"Save Settings"]}),i&&e.jsx("span",{className:`text-sm ${i.includes("Failed")?"text-red-400":"text-green-400"}`,children:i})]})]}),h==="accounts"&&e.jsxs("div",{className:"p-5 bg-dark-surface border border-dark-border rounded-xl space-y-5",children:[e.jsx("div",{className:"flex gap-1 p-1 bg-dark-hover rounded-lg",children:ue.map(a=>{var S;const y=(S=he.find(Z=>Z.platform===a))==null?void 0:S.has_cookie;return e.jsxs("button",{onClick:()=>Ct(a),className:`flex-1 flex items-center justify-center gap-1.5 px-3 py-2 text-sm rounded-md transition-colors ${A===a?"bg-indigo-600 text-white":"text-gray-400 hover:text-white hover:bg-dark-border"}`,children:[e.jsx(tt,{platform:a,size:15,className:A===a?"text-white":st[a]||"text-gray-400"}),Fe(a),y&&e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-green-400 flex-shrink-0"})]},a)})}),(()=>{var Z;const a=Fe(A),y=A==="bilibili"||A==="douyin";if(A==="youtube"){const P=(Z=he.find(_=>_.platform==="youtube"))==null?void 0:Z.has_cookie;return e.jsx(os,{loggedIn:!!P,cookieLoading:ne,cookieMessage:xe,setCookieMessage:V,selectedBrowser:Ee,setSelectedBrowser:Be,browsers:Ge,handleAutoImport:()=>qe("youtube"),onCookiesSaved:async()=>{const _=await pe();ee(_.cookies)},handleCookieFileUpload:_=>Ve("youtube",_)})}return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("p",{className:"text-sm text-gray-300 font-medium flex items-center gap-2",children:[e.jsx(ot,{size:15,className:"text-blue-400"}),"Auto-import from browser"]}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Reads cookies directly from your browser — no extensions, no manual steps.",y?" Or use QR code below.":""]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("select",{value:Ee,onChange:P=>Be(P.target.value),className:"bg-dark-hover border border-dark-border text-white text-sm rounded-lg px-3 py-2 focus:ring-2 focus:ring-indigo-500",children:Ge.map(P=>e.jsx("option",{value:P.value,children:P.label},P.value))}),e.jsxs("button",{onClick:()=>qe(A),disabled:ne,className:"flex items-center gap-2 px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg transition-colors font-medium disabled:opacity-50",children:[ne?e.jsx(z,{size:16,className:"animate-spin"}):e.jsx(be,{size:16}),ne?"Importing...":`Import ${a} Cookies`]})]}),e.jsxs("p",{className:"text-xs text-gray-600",children:["Make sure you are logged in to ",a," in your browser first. A system permission dialog may appear."]})]}),xe&&e.jsx("div",{className:`p-3 rounded-lg text-sm ${xe.includes("✅")?"bg-green-500/10 border border-green-500/30 text-green-400":xe.includes("❌")?"bg-red-500/10 border border-red-500/30 text-red-400":"bg-amber-500/10 border border-amber-500/30 text-amber-400"}`,children:xe}),y&&e.jsxs("div",{className:"border-t border-dark-border pt-4 space-y-3",children:[e.jsxs("p",{className:"text-sm text-gray-300 font-medium flex items-center gap-2",children:[e.jsx(Te,{size:15,className:"text-pink-400"}),"Or scan QR code with ",a," app"]}),U==="idle"||U==="error"||U==="expired"?e.jsxs("div",{children:[e.jsxs("button",{onClick:()=>Me(A),className:"flex items-center gap-2 px-4 py-2 bg-pink-600 hover:bg-pink-700 text-white rounded-lg transition-colors",children:[e.jsx(Te,{size:16}),"Generate QR Code"]}),(U==="error"||U==="expired")&&Ne&&e.jsx("p",{className:`text-sm mt-2 ${U==="expired"?"text-amber-400":"text-red-400"}`,children:Ne})]}):U==="loading"?e.jsxs("div",{className:"flex items-center gap-2 text-gray-400",children:[e.jsx(z,{size:16,className:"animate-spin"}),"Generating QR code..."]}):U==="success"?e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-green-400",children:[e.jsx(le,{size:16}),Ne]}),e.jsx("button",{onClick:()=>Me(A),className:"text-xs text-gray-500 hover:text-gray-300 transition-colors",children:"Re-login"})]}):e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"flex flex-col items-center gap-3 p-4 bg-white rounded-xl w-fit mx-auto",children:e.jsx(vt,{value:jt,size:180,level:"M"})}),e.jsxs("div",{className:"text-center space-y-1",children:[e.jsx("p",{className:`text-sm ${U==="scanned"?"text-cyan-400":"text-gray-400"}`,children:U==="scanned"?e.jsxs("span",{className:"flex items-center justify-center gap-2",children:[e.jsx(Te,{size:14}),"Scanned! Confirm on your phone..."]}):e.jsxs("span",{className:"flex items-center justify-center gap-2",children:[e.jsx(z,{size:14,className:"animate-spin"}),Ne||"Waiting for scan..."]})}),U==="waiting"&&je>0&&e.jsx("p",{className:"text-xs text-gray-500",children:je>10?`Auto-refreshes in ${je}s`:e.jsxs("span",{className:"text-amber-400",children:["Refreshing in ",je,"s..."]})})]}),e.jsxs("div",{className:"flex items-center justify-center gap-3",children:[e.jsx("button",{onClick:()=>Me(A),className:"text-xs text-gray-500 hover:text-gray-300 transition-colors",children:"Refresh now"}),e.jsx("button",{onClick:()=>{K(),q("idle"),Pe("")},className:"text-xs text-gray-500 hover:text-red-400 transition-colors",children:"Cancel"})]})]})]}),e.jsxs("div",{className:`${y||ke?"border-t border-dark-border pt-4":""} space-y-3`,children:[e.jsxs("button",{onClick:()=>Ce(!ke),className:"flex items-center gap-1.5 text-xs text-gray-500 hover:text-gray-300 transition-colors",children:[e.jsx(lt,{size:12}),ke?"▾ Hide file upload":"▸ Or upload cookies.txt file"]}),ke&&e.jsxs("div",{className:"space-y-3 pl-1",children:[e.jsxs("p",{className:"text-xs text-gray-500",children:["Export cookies using a browser extension like"," ",e.jsxs("a",{href:"https://chromewebstore.google.com/detail/get-cookiestxt-locally/cclelndahbckbenkjhflpdbgdldlbecc",target:"_blank",rel:"noopener noreferrer",className:"text-indigo-400 hover:text-indigo-300 inline-flex items-center gap-0.5",children:["Get cookies.txt LOCALLY ",e.jsx(Qe,{size:10})]}),", then upload the file."]}),e.jsx("input",{ref:Re,type:"file",accept:".txt,.cookie,.cookies",className:"hidden",onChange:P=>{var $;const _=($=P.target.files)==null?void 0:$[0];_&&Ve(A,_)}}),e.jsxs("button",{onClick:()=>{var P;return(P=Re.current)==null?void 0:P.click()},disabled:ne,className:"flex items-center gap-2 px-4 py-2 bg-dark-hover hover:bg-dark-border text-white rounded-lg transition-colors disabled:opacity-50",children:[ne?e.jsx(z,{size:16,className:"animate-spin"}):e.jsx(Oe,{size:16}),"Upload cookies.txt"]})]})]})]})})(),e.jsx("div",{className:"pt-4 border-t border-dark-border",children:e.jsx("div",{className:"grid grid-cols-2 gap-2",children:ue.map(a=>{const y=he.find(S=>S.platform===a);return e.jsxs("div",{className:"flex items-center justify-between p-2.5 bg-dark-hover rounded-lg text-sm",children:[e.jsxs("span",{className:"flex items-center gap-2 text-white",children:[e.jsx(tt,{platform:a,size:14,className:st[a]||"text-gray-400"}),Fe(a)]}),e.jsx("span",{className:`text-xs ${y!=null&&y.has_cookie?"text-green-400":"text-gray-500"}`,children:y!=null&&y.has_cookie?"Logged in":"Not set"})]},a)})})})]}),h==="tools"&&e.jsxs("div",{className:"space-y-5",children:[e.jsxs("section",{className:"p-5 bg-dark-surface border border-dark-border rounded-xl",children:[e.jsxs("h2",{className:"text-base font-semibold text-white mb-3 flex items-center gap-2",children:[e.jsx(Le,{className:"text-emerald-500",size:18}),"Video Tools Health"]}),e.jsxs("button",{onClick:async()=>{W(!0);try{const a=await Ot();Q(a)}catch(a){console.error("Health check failed:",a)}finally{W(!1)}},disabled:de,className:"flex items-center gap-2 px-4 py-2 bg-dark-hover hover:bg-dark-border text-white rounded-lg transition-colors disabled:opacity-50 mb-3",children:[de?e.jsx(z,{size:16,className:"animate-spin"}):e.jsx(Le,{size:16}),"Check Health"]}),D&&e.jsx("div",{className:"space-y-2",children:["ffmpeg","ytdlp"].map(a=>{const y=D[a];return e.jsxs("div",{className:`p-3 rounded-lg flex items-center gap-3 ${y.available?"bg-green-500/10 border border-green-500/30":"bg-red-500/10 border border-red-500/30"}`,children:[e.jsx("span",{className:y.available?"text-green-400":"text-red-400",children:y.available?e.jsx(le,{size:16}):e.jsx(fe,{size:16})}),e.jsxs("div",{children:[e.jsx("p",{className:`text-sm font-medium ${y.available?"text-green-300":"text-red-300"}`,children:a==="ytdlp"?"yt-dlp":"FFmpeg"}),e.jsx("p",{className:"text-xs text-gray-400",children:y.available?a==="ytdlp"?`v${y.version}`:y.version:y.error})]})]},a)})})]}),e.jsxs("section",{className:"p-5 bg-dark-surface border border-dark-border rounded-xl",children:[e.jsxs("h2",{className:"text-base font-semibold text-white mb-3 flex items-center gap-2",children:[e.jsx(Ze,{className:"text-red-500",size:18}),"Data Maintenance"]}),e.jsx("p",{className:"text-sm text-gray-400 mb-3",children:"Check for truncated transcripts (duration < 85% of expected)."}),e.jsxs("div",{className:"flex gap-3 mb-3",children:[e.jsxs("button",{onClick:St,disabled:m,className:"flex items-center gap-2 px-4 py-2 bg-dark-hover hover:bg-dark-border text-white rounded-lg transition-colors disabled:opacity-50",children:[m?e.jsx(z,{size:16,className:"animate-spin"}):e.jsx(Yt,{size:16}),"Check for Truncated"]}),o.length>0&&e.jsxs("button",{onClick:Mt,disabled:g,className:"flex items-center gap-2 px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg transition-colors disabled:opacity-50",children:[g?e.jsx(z,{size:16,className:"animate-spin"}):e.jsx(Ze,{size:16}),"Delete ",o.length," Truncated"]})]}),j&&e.jsx("div",{className:`p-3 rounded-lg mb-3 ${j.includes("Failed")?"bg-red-500/10 border border-red-500/30 text-red-300":"bg-green-500/10 border border-green-500/30 text-green-300"}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(le,{size:16}),j]})}),o.length>0&&e.jsxs("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:[e.jsxs("p",{className:"text-sm text-yellow-400 flex items-center gap-2 mb-2",children:[e.jsx(fe,{size:16}),"Found ",o.length," truncated transcripts:"]}),o.map(a=>e.jsxs("div",{className:"p-3 bg-dark-hover rounded-lg text-sm",children:[e.jsx("p",{className:"text-white font-medium truncate",children:a.episode_title}),e.jsxs("p",{className:"text-gray-400 mt-1",children:["Transcript: ",We(a.transcript_duration)," / Expected: ",We(a.episode_duration),e.jsxs("span",{className:"text-red-400 ml-2",children:["(",a.percentage,"%)"]})]})]},a.episode_id))]})]}),e.jsxs("section",{className:"p-5 bg-dark-surface border border-dark-border rounded-xl",children:[e.jsxs("h2",{className:"text-base font-semibold text-white mb-3 flex items-center gap-2",children:[e.jsx(be,{className:"text-cyan-500",size:18}),"Import Xiaoyuzhou Subscriptions"]}),e.jsxs("p",{className:"text-sm text-gray-400 mb-3",children:["Import podcasts from Xiaoyuzhou (小宇宙). ",e.jsx("span",{className:"text-yellow-400",children:"Profile must be public."})]}),e.jsxs("div",{className:"flex gap-3 mb-3",children:[e.jsx("input",{type:"text",value:O,onChange:a=>ce(a.target.value),placeholder:"Username or profile URL",className:"flex-1 bg-dark-hover border border-dark-border text-white text-sm rounded-lg px-3 py-2 focus:ring-2 focus:ring-cyan-500 focus:border-transparent",onKeyDown:a=>a.key==="Enter"&&!Y&&Xe()}),e.jsxs("button",{onClick:Xe,disabled:Y||!O.trim(),className:"flex items-center gap-2 px-4 py-2 bg-cyan-600 hover:bg-cyan-700 text-white rounded-lg transition-colors disabled:opacity-50",children:[Y?e.jsx(z,{size:16,className:"animate-spin"}):e.jsx(be,{size:16}),"Import"]})]}),ye&&e.jsx("div",{className:"p-3 rounded-lg mb-3 bg-red-500/10 border border-red-500/30 text-red-300",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(fe,{size:16}),ye]}),e.jsx("button",{onClick:()=>{I(null),J(null)},className:"text-red-400 hover:text-red-300",children:e.jsx(Je,{size:16})})]})}),L&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"p-3 rounded-lg bg-green-500/10 border border-green-500/30 text-green-300",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(le,{size:16}),"Import Complete"]}),e.jsx("button",{onClick:()=>{I(null),J(null)},className:"text-green-400 hover:text-green-300",children:e.jsx(Je,{size:16})})]}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-400",children:"Found:"})," ",e.jsx("span",{className:"text-white font-medium",children:L.total_found})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-400",children:"Added:"})," ",e.jsx("span",{className:"text-green-400 font-medium",children:L.newly_added})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-400",children:"Existing:"})," ",e.jsx("span",{className:"text-yellow-400 font-medium",children:L.already_subscribed})]}),L.failed>0&&e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-400",children:"Failed:"})," ",e.jsx("span",{className:"text-red-400 font-medium",children:L.failed})]})]})]}),L.podcasts.length>0&&e.jsxs("div",{className:"max-h-48 overflow-y-auto",children:[e.jsx("p",{className:"text-sm text-gray-400 mb-2",children:"Newly imported podcasts:"}),e.jsx("div",{className:"space-y-1",children:L.podcasts.map((a,y)=>e.jsx("div",{className:"text-sm text-white py-1 px-2 bg-dark-hover rounded",children:a},y))})]})]}),e.jsxs("p",{className:"text-xs text-gray-500 mt-3",children:["Find your username in your profile URL (xiaoyuzhoufm.com/user/",e.jsx("span",{className:"text-cyan-400",children:"username"}),")"]})]})]})]})}function os({loggedIn:h,cookieLoading:c,cookieMessage:l,setCookieMessage:u,selectedBrowser:v,setSelectedBrowser:p,browsers:k,handleAutoImport:w,onCookiesSaved:t,handleCookieFileUpload:r}){const[s,n]=x.useState("paste"),[i,d]=x.useState(""),[o,b]=x.useState(!1),m=x.useRef(null),M=async()=>{if(i.trim()){b(!0),u("");try{const g=i.trim();if(g.includes("	")&&(g.includes(".youtube.com")||g.includes("#HttpOnly_"))){const j=new Blob([g],{type:"text/plain"}),E=new File([j],"youtube_cookies.txt",{type:"text/plain"}),O=await it("youtube",E);u(`✅ ${O.message}`)}else{const j=await Bt("youtube",g);u(`✅ ${j.message}`)}await t(),d("")}catch(g){u(`❌ ${g instanceof Error?g.message:"Save failed"}`)}finally{b(!1)}}};return e.jsxs("div",{className:"space-y-4",children:[h?e.jsxs("div",{className:"flex items-center gap-2 p-3 bg-green-500/10 border border-green-500/30 rounded-lg",children:[e.jsx(le,{size:16,className:"text-green-400"}),e.jsx("span",{className:"text-sm text-green-400",children:"YouTube cookies are set"})]}):e.jsx("div",{className:"p-3 bg-amber-500/10 border border-amber-500/30 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-2.5",children:[e.jsx(fe,{size:16,className:"text-amber-400 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"text-xs text-gray-300",children:[e.jsx("p",{className:"font-medium text-amber-300",children:"YouTube cookies recommended"}),e.jsx("p",{className:"mt-0.5 text-gray-400",children:"YouTube may block requests from servers. Upload cookies to ensure all videos work."})]})]})}),e.jsx("div",{className:"flex gap-1 p-0.5 bg-dark-hover rounded-lg",children:[{id:"paste",label:"Paste Cookies",icon:e.jsx(lt,{size:13})},{id:"file",label:"Upload File",icon:e.jsx(Oe,{size:13})},{id:"browser",label:"From Browser",icon:e.jsx(ot,{size:13})}].map(g=>e.jsxs("button",{onClick:()=>n(g.id),className:`flex-1 flex items-center justify-center gap-1.5 px-2 py-1.5 text-xs rounded-md transition-colors ${s===g.id?"bg-indigo-600 text-white":"text-gray-400 hover:text-white"}`,children:[g.icon,g.label]},g.id))}),s==="paste"&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"p-3 bg-dark-hover/50 rounded-lg space-y-2",children:[e.jsx("p",{className:"text-xs text-gray-300 font-medium",children:"How to get your cookies:"}),e.jsxs("ol",{className:"text-xs text-gray-400 space-y-1.5 list-decimal list-inside",children:[e.jsxs("li",{children:["Open ",e.jsx("a",{href:"https://www.youtube.com",target:"_blank",rel:"noopener noreferrer",className:"text-indigo-400 hover:text-indigo-300",children:"YouTube"})," in your browser and make sure you're logged in"]}),e.jsxs("li",{children:["Press ",e.jsx("kbd",{className:"px-1.5 py-0.5 bg-gray-700 rounded text-[11px] text-white",children:"F12"})," to open DevTools"]}),e.jsxs("li",{children:["Go to ",e.jsx("strong",{className:"text-white",children:"Console"})," tab, paste this and press Enter:"]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("pre",{className:"p-2 bg-gray-800 rounded text-[11px] text-green-300 font-mono overflow-x-auto select-all",children:"document.cookie"}),e.jsx("button",{onClick:()=>navigator.clipboard.writeText("document.cookie"),className:"absolute top-1 right-1 p-1 text-gray-500 hover:text-white transition-colors",title:"Copy command",children:e.jsx(be,{size:12})})]}),e.jsxs("p",{className:"text-[11px] text-gray-500",children:["Copy the result (the long string with ",e.jsx("code",{className:"text-gray-400",children:"key=value; key=value"})," format) and paste below. Alternatively, paste a Netscape cookies.txt content — both formats work."]})]}),e.jsx("textarea",{value:i,onChange:g=>d(g.target.value),placeholder:"Paste cookie string or cookies.txt content here...",rows:4,className:"w-full px-3 py-2 bg-dark-hover border border-dark-border rounded-lg text-xs text-white placeholder-gray-500 focus:outline-none focus:border-indigo-500 font-mono resize-none"}),e.jsxs("button",{onClick:M,disabled:o||!i.trim(),className:"flex items-center gap-2 px-4 py-2 bg-indigo-600 hover:bg-indigo-700 disabled:bg-gray-700 disabled:text-gray-500 text-white rounded-lg text-sm font-medium transition-colors",children:[o?e.jsx(z,{size:16,className:"animate-spin"}):e.jsx(Ue,{size:16}),"Save Cookies"]})]}),s==="file"&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"p-3 bg-dark-hover/50 rounded-lg space-y-2",children:[e.jsx("p",{className:"text-xs text-gray-300 font-medium",children:"Export cookies.txt file:"}),e.jsxs("ol",{className:"text-xs text-gray-400 space-y-1.5 list-decimal list-inside",children:[e.jsxs("li",{children:["Install"," ",e.jsxs("a",{href:"https://chromewebstore.google.com/detail/get-cookiestxt-locally/cclelndahbckbenkjhflpdbgdldlbecc",target:"_blank",rel:"noopener noreferrer",className:"text-indigo-400 hover:text-indigo-300",children:["Get cookies.txt LOCALLY ",e.jsx(Qe,{size:10,className:"inline"})]})," ","extension"]}),e.jsxs("li",{children:["Open ",e.jsx("a",{href:"https://www.youtube.com",target:"_blank",rel:"noopener noreferrer",className:"text-indigo-400 hover:text-indigo-300",children:"YouTube"})," and log in"]}),e.jsx("li",{children:"Click the extension icon → Export"}),e.jsx("li",{children:"Upload the downloaded file below"})]})]}),e.jsx("input",{ref:m,type:"file",accept:".txt,.cookie,.cookies",className:"hidden",onChange:g=>{var j;const f=(j=g.target.files)==null?void 0:j[0];f&&r(f),m.current&&(m.current.value="")}}),e.jsxs("button",{onClick:()=>{var g;return(g=m.current)==null?void 0:g.click()},disabled:c,className:"flex items-center gap-2 px-4 py-2 bg-indigo-600 hover:bg-indigo-700 disabled:opacity-50 text-white rounded-lg text-sm font-medium transition-colors",children:[c?e.jsx(z,{size:16,className:"animate-spin"}):e.jsx(Oe,{size:16}),"Upload cookies.txt"]})]}),s==="browser"&&e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"p-3 bg-dark-hover/50 rounded-lg",children:e.jsx("p",{className:"text-xs text-gray-400",children:"Reads cookies directly from your browser. Only works when this app runs on your own computer (not cloud deployment)."})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("select",{value:v,onChange:g=>p(g.target.value),className:"bg-dark-hover border border-dark-border text-white text-sm rounded-lg px-3 py-2",children:k.map(g=>e.jsx("option",{value:g.value,children:g.label},g.value))}),e.jsxs("button",{onClick:w,disabled:c,className:"flex items-center gap-2 px-4 py-2 bg-indigo-600 hover:bg-indigo-700 disabled:opacity-50 text-white rounded-lg text-sm font-medium transition-colors",children:[c?e.jsx(z,{size:16,className:"animate-spin"}):e.jsx(be,{size:16}),c?"Importing...":"Auto-import"]})]})]}),l&&e.jsx("div",{className:`p-2.5 rounded-lg text-xs ${l.includes("✅")?"bg-green-500/10 border border-green-500/30 text-green-400":l.includes("❌")?"bg-red-500/10 border border-red-500/30 text-red-400":"bg-amber-500/10 border border-amber-500/30 text-amber-400"}`,children:l})]})}function nt({label:h,value:c}){return e.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-dark-border last:border-0",children:[e.jsx("span",{className:"text-gray-400 text-sm",children:h}),e.jsx("span",{className:"text-white font-mono text-sm",children:c})]})}export{vs as default};
